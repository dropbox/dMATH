[[CI]][1] [[DOI]][2]

[[Quick intros][3]] [[Proofs done][4]] [[Binaries][5]] [[User interfaces][6]] [[Compiling][7]]
[[Documentation][8]] [[Getting help][9]] [[Acknowledgements][10]] [[Mailing lists][11]]
[[Third-party resources][12]]

# VeriFast

By Bart Jacobs*, Jan Smans*, and Frank Piessens*, with contributions by Pieter Agten*, Cedric
Cuypers*, Lieven Desmet*, Niels Mommen*, Jan Tobias Muehlberg*, Willem Penninckx*, Pieter
Philippaerts*, Nima Rahimi Foroushaani*, Amin Timany*, Thomas Van Eyck*, Gijs Vanspauwen*, Frédéric
Vogels*, and [external contributors][13]

* imec-DistriNet research group, Department of Computer Science, KU Leuven - University of Leuven,
Belgium

VeriFast is a research prototype of a tool for modular formal verification of correctness properties
of single-threaded and multithreaded C, Rust and Java programs annotated with preconditions and
postconditions written in separation logic. To express rich specifications, the programmer can
define inductive datatypes, primitive recursive pure functions over these datatypes, and abstract
separation logic predicates. To verify these rich specifications, the programmer can write lemma
functions, i.e., functions that serve only as proofs that their precondition implies their
postcondition. The verifier checks that lemma functions terminate and do not have side-effects.
Since neither VeriFast itself nor the underlying SMT solver need to do any significant search,
verification time is predictable and low.

The VeriFast source code and binaries are released under the [MIT license][14].

## Quick intros

* [A quick introduction to VeriFast for C][15]
* [A quick introduction to VeriFast for Rust][16]

## Proofs done

Some of the more notable proofs done with VeriFast (with caveats) include:

* A proof of memory safety and thread safety of [the Linux boot protocol keyboard driver][17]
* A proof of absence of array index out of bounds exceptions, null pointer exceptions, and invalid
  API calls in [(a mock-up of) the Java Card code running on the Belgian electronic identity
  card][18]
* A modular proof of memory safety, thread safety, and termination of a [cohort lock][19]
  implemented on top of ticketlocks, themselves implemented using busy waiting, and using lock
  handoff
* Proofs of integrity and confidentiality of a number of simple [cryptographic protocols][20]
  implemented in C using the byte buffer-based APIs of mbed TLS (as opposed to a high-level
  "symbolic" API).
* A proof of a [floating-point algorithm][21] for computing the square root, taking into account
  rounding (but not overflow or underflow).
* [Termination of some small Java programs involving dynamic binding][22] (a.k.a. virtual method
  calls) and/or concurrency.
* Jayanti's optimal [snapshot algorithm][23], using prophecies
* A [concurrent set][24] implemented using lock coupling (a.k.a. hand-over-hand locking).
* A modular proof of a fine-grained concurrent Multiple Compare And Swap ([MCAS][25]) algorithm
  built on top of a Restricted Double Compare Single Swap algorithm, using helping.
* Termination of various concurrent programs using [monitors][26] and condition variables
* Some small [purely unsafe][27] (i.e. C-style) Rust programs, including a constant-space tree
  marking algorithm
* A partial proof of the Rust standard library's [LinkedList][28] and [RawVec][29] abstractions
* Proofs of simplified versions of Rust's [Cell][30], [Mutex][31], [Rc][32], [Arc][33], and
  [RefCell][34] abstractions

## Binaries

Within an hour after each push to the master branch, binary packages become available [here][35].

These "nightly" builds are very stable and are recommended. Still, named releases are available
[here][36]. (An archive of older named releases is [here][37].)

Simply extract the files from the archive to any location in your filesystem. All files in the
archive are in a directory named `verifast-COMMIT` where `COMMIT` describes the Git commit. For
example, on Linux:

`tar xzf ~/Downloads/verifast-nightly.tar.gz
cd verifast-<TAB>  # Press Tab to autocomplete
bin/vfide examples/java/termination/Stack.jarsrc  # Launch the VeriFast IDE with the specified examp
le
./test.sh  # Run the test suite (verifies all examples)
`

**Note (macOS):** To avoid GateKeeper issues, before opening the downloaded archive, remove the
`com.apple.quarantine` attribute by running

`sudo xattr -d com.apple.quarantine ~/Downloads/verifast-nightly-osx.tar.gz
`

**Supply chain security:** The CI workflow creates [GitHub Artifact Attestations][38] for these
binaries, so that you can verify that they were generated by a GitHub Actions workflow triggered by
a push to this repository. To do so, install the [GitHub CLI][39] and run

`gh attestation verify verifast-21.04-352-gbeb57a82-macos.tar.gz --repo verifast/verifast
`

To check for a particular commit SHA, run

`[ "$(gh attestation verify verifast-21.04-352-gbeb57a82-macos.tar.gz --repo verifast/verifast --for
mat json --jq '.[0].verificationResult.signature.certificate.sourceRepositoryDigest')" = "beb57a8209
15409f71dbc2a802985e291e60e12d" ]
`

## User interfaces

We offer the following user interfaces:

* The VeriFast IDE (at `bin/vfide` in the distribution)
* The [VeriFast VS Code Extension][40]
* The VeriFast command-line tool (at `bin/verifast` in the distribution)

## Compiling

* [Windows][41]
* [Linux][42]
* [macOS][43]

## Documentation

* [The VeriFast Tutorial][44] (for C)
* [Verifying purely `unsafe` Rust programs with VeriFast: a tutorial][45]
* [A tour of the RawVec proof][46] (Rust)
* [A tour of the LinkedList proof][47] (Rust)
* [Featherweight VeriFast][48] [(Slides, handouts, Coq proof)][49]
* [Scientific papers][50] on the various underlying ideas
* [VeriFast Docs][51] (under construction) with a nascent FAQ and a grammar for annotated C/Java
  source files
* [The VeriFast for Rust Reference][52] (under construction)

## Getting help

The maintainer (and, perhaps, other VeriFast users and enthusiasts as well) can be reached for
informal chat in the [VeriFast Zulip chatroom][53].

## Acknowledgements

### Dependencies

We gratefully acknowledge the authors and contributors of the following software packages.

#### Bits that we ship in our binary packages

* [OCaml][54]
* [OCaml-Num][55]
* [Lablgtk][56]
* [GTK+][57] and its dependencies (including GLib, Cairo, Pango, ATK, gdk-pixbuf, gettext,
  fontconfig, freetype, expat, libpng, zlib, Harfbuzz, and Graphite)
* [GtkSourceView][58]
* The excellent [Z3][59] theorem prover by Leonardo de Moura and Nikolaj Bjorner at Microsoft
  Research, and co-authors

#### Software used at build time

* findlib, ocamlbuild, camlp4, valac
* Cygwin, Homebrew, Debian, Ubuntu
* The usual infrastructure: GNU/Linux, GNU make, gcc, etc.

### Infrastructure

We gratefully acknowledge the following infrastructure providers.

* GitHub
* The [Zulip][60] team chat app

### Funding

This work is supported in part by the Flemish Research Fund (FWO-Vlaanderen), by the EU FP7 projects
SecureChange, STANCE, ADVENT, and VESSEDIA, by Microsoft Research Cambridge as part of the Verified
Software Initiative, by the Research Fund KU Leuven, and by the Cybersecurity Research Program
Flanders.

## Mailing lists

To be notified whenever commits are pushed to this repository, join the [verifast-commits][61]
Google Groups forum.

## Third-Party Resources

* Kiwamu Okabe created a [Google Groups forum][62] on VeriFast
* Kiwamu Okabe translated the VeriFast Tutorial into [Japanese][63]. Thanks, Kiwamu!
* Joseph Benden created [Ubuntu packages][64]
* Joe Doyle created a VeriFast Users' Group on Matrix at `#vf-users:matrix.org`

[1]: https://github.com/verifast/verifast/actions
[2]: https://doi.org/10.5281/zenodo.13620299
[3]: #quick-intros
[4]: #proofs-done
[5]: #binaries
[6]: #user-interfaces
[7]: #compiling
[8]: #documentation
[9]: #getting-help
[10]: #acknowledgements
[11]: #mailing-lists
[12]: #third-party-resources
[13]: https://github.com/verifast/verifast/graphs/contributors
[14]: /verifast/verifast/blob/master/LICENSE.md
[15]: /verifast/verifast/blob/master/intro-c.md
[16]: https://verifast.github.io/verifast/rust-reference/intro.html
[17]: https://github.com/verifast/verifast/tree/master/examples/usbkbd
[18]: https://github.com/verifast/verifast/tree/master/examples/java/Java%20Card/NewEidCard
[19]: https://github.com/verifast/verifast/tree/master/examples/busywaiting/flexiblespecs/ticketlock
-java
[20]: https://github.com/verifast/verifast/tree/master/examples/crypto_ccs
[21]: https://github.com/verifast/verifast/tree/master/examples/floating_point/sqrt_with_rounding
[22]: https://github.com/verifast/verifast/tree/master/examples/java/termination
[23]: https://github.com/verifast/verifast/blob/master/examples/jayanti/jayanti.c
[24]: https://github.com/verifast/verifast/tree/master/examples/lcset
[25]: https://github.com/verifast/verifast/tree/master/examples/mcas
[26]: https://github.com/verifast/verifast/tree/master/examples/monitors
[27]: https://github.com/verifast/verifast/tree/master/tests/rust/purely_unsafe
[28]: https://github.com/verifast/verifast/tree/master/tests/rust/safe_abstraction/linked_list
[29]: https://github.com/verifast/verifast/tree/master/tests/rust/safe_abstraction/raw_vec
[30]: https://github.com/verifast/verifast/blob/master/tests/rust/safe_abstraction/cell.rs
[31]: https://github.com/verifast/verifast/blob/master/tests/rust/safe_abstraction/mutex.rs
[32]: https://github.com/verifast/verifast/blob/master/tests/rust/safe_abstraction/rc.rs
[33]: https://github.com/verifast/verifast/blob/master/tests/rust/safe_abstraction/arc.rs
[34]: https://github.com/verifast/verifast/blob/master/tests/rust/safe_abstraction/ref_cell.rs
[35]: https://github.com/verifast/verifast/releases/tag/nightly
[36]: https://github.com/verifast/verifast/releases
[37]: https://people.cs.kuleuven.be/~bart.jacobs/verifast/releases/
[38]: https://docs.github.com/en/actions/security-for-github-actions/using-artifact-attestations
[39]: https://cli.github.com
[40]: https://marketplace.visualstudio.com/items?itemName=VeriFast.verifast
[41]: /verifast/verifast/blob/master/README.Windows.md
[42]: /verifast/verifast/blob/master/README.Linux.md
[43]: /verifast/verifast/blob/master/README.MacOS.md
[44]: https://doi.org/10.5281/zenodo.887906
[45]: https://doi.org/10.5281/zenodo.17413725
[46]: /verifast/verifast/blob/master/tests/rust/safe_abstraction/raw_vec
[47]: /verifast/verifast/blob/master/tests/rust/safe_abstraction/linked_list
[48]: http://arxiv.org/pdf/1507.07697
[49]: https://people.cs.kuleuven.be/~bart.jacobs/fvf
[50]: https://people.cs.kuleuven.be/~bart.jacobs/verifast/
[51]: https://verifast.github.io/verifast-docs/
[52]: https://verifast.github.io/verifast/rust-reference
[53]: https://verifast.zulipchat.com
[54]: http://caml.inria.fr
[55]: https://github.com/ocaml/num
[56]: http://lablgtk.forge.ocamlcore.org
[57]: https://www.gtk.org
[58]: https://wiki.gnome.org/Projects/GtkSourceView
[59]: https://github.com/Z3Prover/z3
[60]: https://zulip.com
[61]: https://groups.google.com/forum/#!forum/verifast-commits
[62]: https://groups.google.com/forum/#!forum/verifast
[63]: https://github.com/jverifast-ug/translate/blob/master/Manual/Tutorial/Tutorial.md
[64]: https://launchpad.net/%7Ejbenden/+archive/ubuntu/verifast
