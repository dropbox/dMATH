{
  "tool": "joi",
  "category": "data_validation",
  "common_errors": [
    {
      "error_pattern": "ValidationError.*is required",
      "description": "Required field missing from input",
      "causes": [
        "Field not provided in data",
        "Typo in field name",
        "Nested path incorrect"
      ],
      "solutions": [
        "Provide required field in input",
        "Use .optional() if field should be optional",
        "Check field name spelling"
      ]
    },
    {
      "error_pattern": "must be a.*type",
      "description": "Field value has wrong type",
      "causes": [
        "String passed where number expected",
        "Array passed where object expected",
        "Null passed where value required"
      ],
      "solutions": [
        "Convert value to correct type before validation",
        "Use .coerce() methods: Joi.number().coerce()",
        "Check input data types"
      ]
    },
    {
      "error_pattern": "is not allowed",
      "description": "Unknown field in strict mode",
      "causes": [
        "Extra field in input not in schema",
        "Schema using .strict() or not .unknown()",
        "Typo in field name"
      ],
      "solutions": [
        "Add field to schema",
        "Use .unknown(true) to allow extra fields",
        "Strip unknown: { stripUnknown: true }"
      ]
    },
    {
      "error_pattern": "fails to match.*pattern",
      "description": "String doesn't match regex pattern",
      "causes": [
        "Input doesn't match .pattern()",
        "Case sensitivity issue",
        "Special characters not escaped"
      ],
      "solutions": [
        "Check regex pattern is correct",
        "Use case-insensitive flag if needed",
        "Escape special regex characters"
      ]
    },
    {
      "error_pattern": "must be.*length",
      "description": "String/array length validation failed",
      "causes": [
        "Input shorter than .min()",
        "Input longer than .max()",
        "Exact .length() not matched"
      ],
      "solutions": [
        "Adjust input to meet length requirements",
        "Review min/max/length constraints",
        "Use .truncate() for automatic truncation"
      ]
    },
    {
      "error_pattern": "must be one of",
      "description": "Value not in allowed set",
      "causes": [
        "Input not in .valid() list",
        "Enum value not matching",
        "Case sensitivity"
      ],
      "solutions": [
        "Use one of the valid values",
        "Add value to .valid() list",
        "Use .insensitive() for case-insensitive matching"
      ]
    },
    {
      "error_pattern": "Joi.*is not a function",
      "description": "Joi method doesn't exist",
      "causes": [
        "Method name typo",
        "Using deprecated API",
        "Wrong Joi version"
      ],
      "solutions": [
        "Check method name: Joi.string(), Joi.number()",
        "Update from @hapi/joi to joi if needed",
        "Review Joi version changelog"
      ]
    },
    {
      "error_pattern": "cannot be cast to.*type",
      "description": "Type coercion failed",
      "causes": [
        "Invalid string for number coercion",
        "Cannot parse date string"
      ],
      "solutions": [
        "Provide valid coercible value",
        "Use strict validation without coercion",
        "Handle coercion errors explicitly"
      ]
    },
    {
      "error_pattern": "must be a valid.*email",
      "description": "Invalid email format",
      "causes": [
        "Email format incorrect",
        "TLD options too strict"
      ],
      "solutions": [
        "Provide valid email format",
        "Adjust tld options if needed",
        "Use custom pattern for special cases"
      ]
    },
    {
      "error_pattern": "when.*is missing",
      "description": "Conditional validation missing peer",
      "causes": [
        ".when() references non-existent field",
        "Peer field not in schema"
      ],
      "solutions": [
        "Include referenced field in schema",
        "Check field path in .when()",
        "Use correct sibling reference"
      ]
    },
    {
      "error_pattern": "must be a valid uri",
      "description": "Invalid URI format",
      "causes": [
        "Missing protocol",
        "Invalid characters in URL",
        "Scheme not in allowed list"
      ],
      "solutions": [
        "Include http:// or https://",
        "Use .uri({ scheme: ['http', 'https'] })",
        "Validate URL format before Joi"
      ]
    },
    {
      "error_pattern": "custom.*must.*be.*function",
      "description": "Custom validation incorrectly defined",
      "causes": [
        ".custom() not given function",
        "Validator function returns wrong type"
      ],
      "solutions": [
        "Pass function to .custom()",
        "Return value or throw error from custom",
        "Use helpers.error() for custom errors"
      ]
    }
  ]
}
