{
  "tool": "eventemitter3",
  "category": "events",
  "common_errors": [
    {
      "id": "ee3_listener_not_called",
      "pattern": "listener not triggered|event not firing|handler missing",
      "severity": "error",
      "causes": [
        "Event name mismatch (case-sensitive)",
        "Listener added after emit",
        "Wrong context binding"
      ],
      "solutions": [
        "Ensure event names match exactly (case-sensitive)",
        "Add listeners before emitting events",
        "Use third param for context: on('event', handler, context)",
        "Check listener is actually a function"
      ]
    },
    {
      "id": "ee3_memory_leak",
      "pattern": "memory leak|listeners accumulating|too many listeners",
      "severity": "warning",
      "causes": [
        "Not removing listeners when done",
        "Adding listeners in loops without cleanup",
        "No maxListeners warning (unlike Node EventEmitter)"
      ],
      "solutions": [
        "Use removeListener() or off() when done",
        "Use once() for single-use listeners",
        "Track listeners and remove in cleanup",
        "eventemitter3 doesn't warn about many listeners"
      ]
    },
    {
      "id": "ee3_this_context",
      "pattern": "this is undefined|wrong this context|context lost",
      "severity": "error",
      "causes": [
        "Arrow functions don't use context param",
        "Context parameter not provided",
        "bind() conflicting with context param"
      ],
      "solutions": [
        "Use third param: emitter.on('event', handler, this)",
        "Or use arrow function to capture lexical this",
        "Don't use both .bind() and context param",
        "Arrow functions ignore the context parameter"
      ]
    },
    {
      "id": "ee3_vs_node_eventemitter",
      "pattern": "API difference|setMaxListeners|removeAllListeners",
      "severity": "warning",
      "causes": [
        "EventEmitter3 has different API than Node's",
        "Some methods have different signatures",
        "Missing some Node EventEmitter methods"
      ],
      "solutions": [
        "No setMaxListeners() - design decision",
        "removeAllListeners accepts optional event name",
        "eventNames() returns array of event names",
        "Check API docs for differences from Node"
      ]
    },
    {
      "id": "ee3_once_context",
      "pattern": "once with context|once listener wrong this|one-time context",
      "severity": "warning",
      "causes": [
        "once() also accepts context parameter",
        "Forgetting context on once listeners",
        "Mixing patterns"
      ],
      "solutions": [
        "once('event', handler, context) works",
        "Context is third param for consistency",
        "Arrow function approach also works with once",
        "Be consistent in your codebase"
      ]
    }
  ]
}
