{
  "tool": "azure_cosmos_db",
  "category": "azure_database",
  "description": "Azure Cosmos DB - globally distributed multi-model database",
  "common_errors": [
    {
      "id": "request_rate_exceeded",
      "pattern": "RequestRateTooLarge",
      "regex": "(?i)request.*rate.*too.*large|429|throttl|ru.*exceeded",
      "cause": "Request Unit (RU) limit exceeded",
      "solution": "Increase provisioned RUs, enable autoscale, implement retry with exponential backoff, optimize queries",
      "severity": "high",
      "category": "throttling"
    },
    {
      "id": "auth_error",
      "pattern": "Unauthorized",
      "regex": "(?i)unauthorized|401|invalid.*key|token.*expired|forbidden",
      "cause": "Authentication or authorization failed",
      "solution": "Verify account key, check resource token validity, configure RBAC roles properly",
      "severity": "high",
      "category": "authentication"
    },
    {
      "id": "not_found",
      "pattern": "NotFound",
      "regex": "(?i)not.*found|404|resource.*not.*found|database.*not.*exist",
      "cause": "Database, container, or document not found",
      "solution": "Verify database/container names, check partition key value, create resources if missing",
      "severity": "medium",
      "category": "resources"
    },
    {
      "id": "partition_key_error",
      "pattern": "PartitionKey",
      "regex": "(?i)partition.*key|invalid.*partition|partition.*range|cross.*partition",
      "cause": "Partition key error or cross-partition query",
      "solution": "Include partition key in requests, design partition key for even distribution, enable cross-partition queries explicitly",
      "severity": "medium",
      "category": "partitioning"
    },
    {
      "id": "request_size",
      "pattern": "RequestEntityTooLarge",
      "regex": "(?i)request.*too.*large|413|document.*size|2.*mb.*limit",
      "cause": "Document or request exceeds size limit (2 MB)",
      "solution": "Split large documents, store large data in Blob storage with reference, reduce batch size",
      "severity": "medium",
      "category": "limits"
    },
    {
      "id": "conflict",
      "pattern": "Conflict",
      "regex": "(?i)conflict|409|document.*already.*exists|etag.*mismatch",
      "cause": "Write conflict or optimistic concurrency violation",
      "solution": "Use UPSERT operation, implement conflict resolution policy, retry with updated ETag",
      "severity": "medium",
      "category": "concurrency"
    },
    {
      "id": "timeout",
      "pattern": "Timeout",
      "regex": "(?i)timeout|request.*timeout|408|operation.*took.*too.*long",
      "cause": "Request timed out",
      "solution": "Increase timeout, optimize query, check network connectivity, review consistency level",
      "severity": "medium",
      "category": "performance"
    },
    {
      "id": "index_error",
      "pattern": "Index",
      "regex": "(?i)index.*error|indexing.*policy|index.*not.*found|composite.*index",
      "cause": "Indexing policy configuration issue",
      "solution": "Update indexing policy to include required paths, add composite indexes for ORDER BY",
      "severity": "medium",
      "category": "indexing"
    },
    {
      "id": "stored_procedure",
      "pattern": "StoredProcedure",
      "regex": "(?i)stored.*procedure|javascript.*error|sproc.*error|execution.*error",
      "cause": "Stored procedure execution error",
      "solution": "Check JavaScript code, verify partition key in sproc call, handle exceptions in sproc code",
      "severity": "medium",
      "category": "sprocs"
    },
    {
      "id": "consistency_error",
      "pattern": "Consistency",
      "regex": "(?i)consistency.*level|strong.*consistency|bounded.*staleness|session.*token",
      "cause": "Consistency level or session token issue",
      "solution": "Pass session token for session consistency, choose appropriate consistency level for use case",
      "severity": "medium",
      "category": "consistency"
    }
  ],
  "related_tools": ["azure_cli", "cosmos_db_emulator", "data_explorer"],
  "documentation_url": "https://docs.microsoft.com/azure/cosmos-db/"
}
