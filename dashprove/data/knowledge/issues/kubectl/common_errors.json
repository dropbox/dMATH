{
  "tool": "kubectl",
  "category": "kubernetes_cli",
  "description": "kubectl - Kubernetes command-line tool",
  "common_errors": [
    {
      "id": "connection_refused",
      "pattern": "connection refused",
      "regex": "(?i)connection refused|unable to connect|dial.*tcp.*refused|couldn't connect to server",
      "cause": "Cannot connect to Kubernetes API server",
      "solution": "Check cluster is running, verify kubeconfig server address, check firewall rules",
      "severity": "high",
      "category": "connectivity"
    },
    {
      "id": "unauthorized",
      "pattern": "Unauthorized",
      "regex": "(?i)unauthorized|401|authentication.*error|invalid.*credentials",
      "cause": "Authentication failed with cluster",
      "solution": "Check kubeconfig credentials, renew token/certificate, verify RBAC configuration",
      "severity": "high",
      "category": "authentication"
    },
    {
      "id": "forbidden",
      "pattern": "Forbidden",
      "regex": "(?i)forbidden|403|access.*denied|User.*cannot|RBAC.*denied",
      "cause": "User lacks required RBAC permissions",
      "solution": "Request appropriate RBAC role/clusterrole binding, check service account permissions",
      "severity": "medium",
      "category": "authorization"
    },
    {
      "id": "not_found",
      "pattern": "NotFound",
      "regex": "(?i)not found|404|resource.*not found|does not exist|no.*resources found",
      "cause": "Specified resource does not exist",
      "solution": "Check resource name and namespace (-n flag), verify resource was created",
      "severity": "low",
      "category": "resources"
    },
    {
      "id": "invalid_yaml",
      "pattern": "invalid YAML",
      "regex": "(?i)yaml.*error|invalid.*yaml|unmarshal.*error|json.*parse|mapping.*values",
      "cause": "Syntax error in YAML manifest",
      "solution": "Validate YAML with 'kubectl apply --dry-run=client', check indentation and structure",
      "severity": "medium",
      "category": "manifest"
    },
    {
      "id": "namespace_not_found",
      "pattern": "namespace not found",
      "regex": "(?i)namespace.*not found|namespaces.*not found|unknown namespace",
      "cause": "Specified namespace does not exist",
      "solution": "Create namespace with 'kubectl create namespace' or use existing namespace",
      "severity": "medium",
      "category": "namespaces"
    },
    {
      "id": "context_not_found",
      "pattern": "context not found",
      "regex": "(?i)context.*not found|no.*context|invalid.*context",
      "cause": "Kubeconfig context does not exist",
      "solution": "List contexts with 'kubectl config get-contexts', use valid context name",
      "severity": "medium",
      "category": "configuration"
    },
    {
      "id": "validation_error",
      "pattern": "validation error",
      "regex": "(?i)validation.*error|strict.*decoding.*error|unknown field|invalid.*spec",
      "cause": "Resource manifest validation failed",
      "solution": "Check API version, verify field names against resource spec, remove unknown fields",
      "severity": "medium",
      "category": "manifest"
    },
    {
      "id": "already_exists",
      "pattern": "AlreadyExists",
      "regex": "(?i)already exists|resource.*exists|conflict.*409",
      "cause": "Resource with same name already exists",
      "solution": "Delete existing resource or use 'kubectl apply' instead of 'create'",
      "severity": "low",
      "category": "resources"
    },
    {
      "id": "certificate_error",
      "pattern": "certificate error",
      "regex": "(?i)x509.*certificate|certificate.*verify|tls.*handshake|unable to verify",
      "cause": "TLS certificate verification failure",
      "solution": "Check cluster CA certificate, set insecure-skip-tls-verify for testing (not production)",
      "severity": "high",
      "category": "security"
    },
    {
      "id": "timeout",
      "pattern": "timeout",
      "regex": "(?i)timeout|timed out|context deadline exceeded|operation.*timeout",
      "cause": "Operation timed out waiting for completion",
      "solution": "Check cluster health, increase --timeout flag, check network latency",
      "severity": "medium",
      "category": "timing"
    },
    {
      "id": "server_version_mismatch",
      "pattern": "server version",
      "regex": "(?i)server version.*differs|unsupported.*version|api.*version|deprecated",
      "cause": "kubectl version incompatible with cluster version",
      "solution": "Update kubectl to match cluster version (within 1 minor version)",
      "severity": "low",
      "category": "version"
    }
  ],
  "related_tools": ["helm", "kustomize", "k9s", "lens"],
  "documentation_url": "https://kubernetes.io/docs/reference/kubectl/"
}
