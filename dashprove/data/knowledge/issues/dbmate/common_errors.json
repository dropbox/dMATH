{
  "tool": "dbmate",
  "category": "database_migration",
  "common_errors": [
    {
      "pattern": "Error connecting to database|connection refused",
      "meaning": "Cannot connect to database",
      "causes": ["Database not running", "Wrong DATABASE_URL", "Network issue"],
      "solutions": ["Verify database is running", "Check DATABASE_URL env var format", "Test connection manually"]
    },
    {
      "pattern": "database .* does not exist",
      "meaning": "Target database doesn't exist",
      "causes": ["Database not created", "Wrong database name"],
      "solutions": ["Run dbmate create", "Check database name in URL", "Create database manually"]
    },
    {
      "pattern": "migration.*already exists|duplicate migration",
      "meaning": "Migration already applied",
      "causes": ["Re-running same migration", "Migration version conflict"],
      "solutions": ["Check dbmate status", "Migrations are idempotent by default", "Use dbmate rollback if needed"]
    },
    {
      "pattern": "no migrations to run",
      "meaning": "All migrations applied",
      "causes": ["Database up to date", "No new migrations", "Migrations in wrong directory"],
      "solutions": ["Verify migrations directory: db/migrations/", "Check file naming: YYYYMMDDHHMMSS_name.sql", "Run dbmate status to see applied"]
    },
    {
      "pattern": "syntax error at or near|invalid SQL",
      "meaning": "Invalid SQL in migration",
      "causes": ["SQL syntax error", "Database-specific syntax issue", "Missing semicolon"],
      "solutions": ["Check SQL syntax", "Verify syntax for target database", "Test SQL manually first"]
    },
    {
      "pattern": "migration.*not found|cannot find",
      "meaning": "Migration file missing",
      "causes": ["File deleted", "Wrong directory", "Filename mismatch"],
      "solutions": ["Check db/migrations/ directory", "Verify file naming convention", "Ensure file has .sql extension"]
    },
    {
      "pattern": "permission denied|access denied",
      "meaning": "Database permission error",
      "causes": ["User lacks privileges", "Wrong credentials", "Database locked"],
      "solutions": ["Grant required permissions", "Verify username/password", "Check database user privileges"]
    },
    {
      "pattern": "schema_migrations.*does not exist",
      "meaning": "Migration tracking table missing",
      "causes": ["First migration run", "Table dropped", "Different schema"],
      "solutions": ["dbmate creates table automatically", "Run dbmate migrate", "Check schema name in connection"]
    },
    {
      "pattern": "transaction.*failed|rollback",
      "meaning": "Migration transaction failed",
      "causes": ["Error during migration", "Constraint violation", "Timeout"],
      "solutions": ["Check error details above", "Fix SQL and re-run", "Migrations auto-rollback on error"]
    },
    {
      "pattern": "unsupported database",
      "meaning": "Database type not supported",
      "causes": ["Wrong URL scheme", "Database not supported", "Driver missing"],
      "solutions": ["Use supported: postgres://, mysql://, sqlite://", "Check dbmate documentation for drivers", "Verify connection string format"]
    }
  ],
  "debugging_commands": [
    "dbmate status",
    "dbmate dump",
    "dbmate new <name>",
    "dbmate --help"
  ],
  "documentation_urls": [
    "https://github.com/amacneil/dbmate",
    "https://github.com/amacneil/dbmate#readme"
  ]
}
