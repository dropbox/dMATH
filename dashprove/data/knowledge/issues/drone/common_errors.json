{
  "tool": "drone",
  "category": "ci_cd",
  "common_errors": [
    {
      "error_pattern": "yaml: unmarshal errors",
      "description": "Invalid YAML syntax in .drone.yml",
      "causes": [
        "Indentation error",
        "Invalid YAML syntax",
        "Tab characters instead of spaces"
      ],
      "solutions": [
        "Validate YAML: drone lint .drone.yml",
        "Use spaces not tabs for indentation",
        "Check for missing colons or quotes"
      ]
    },
    {
      "error_pattern": "pipeline.*not found",
      "description": "Referenced pipeline doesn't exist",
      "causes": [
        "Pipeline name typo",
        "depends_on references wrong pipeline",
        "Pipeline defined in separate file"
      ],
      "solutions": [
        "Check pipeline names match exactly",
        "Verify depends_on list",
        "Define all pipelines in same file or use imports"
      ]
    },
    {
      "error_pattern": "secret.*not found",
      "description": "Secret not available to pipeline",
      "causes": [
        "Secret not created in Drone",
        "Secret name mismatch",
        "Repository not authorized for secret"
      ],
      "solutions": [
        "Create secret: drone secret add --repository org/repo --name key --data value",
        "Use from_secret correctly: from_secret: my_secret",
        "Check organization vs repository secrets"
      ]
    },
    {
      "error_pattern": "insufficient privilege",
      "description": "Pipeline requires elevated privileges",
      "causes": [
        "trusted mode required but not enabled",
        "Volume mount requires trust",
        "Privileged container requested"
      ],
      "solutions": [
        "Enable trusted mode in repository settings",
        "Request admin to enable privileged access",
        "Use rootless alternatives if possible"
      ]
    },
    {
      "error_pattern": "image pull.*failed",
      "description": "Cannot pull Docker image",
      "causes": [
        "Image doesn't exist",
        "Private registry without auth",
        "Network connectivity issue"
      ],
      "solutions": [
        "Verify image name and tag exist",
        "Add image_pull_secrets for private registries",
        "Check Docker Hub rate limits"
      ]
    },
    {
      "error_pattern": "step.*exited.*non-zero",
      "description": "Pipeline step failed with error code",
      "causes": [
        "Command in step failed",
        "Test failures",
        "Build errors"
      ],
      "solutions": [
        "Check logs for specific error",
        "Verify commands work locally",
        "Add failure: ignore if acceptable"
      ]
    },
    {
      "error_pattern": "clone.*failed",
      "description": "Cannot clone repository",
      "causes": [
        "Repository access denied",
        "SSH key not configured",
        "Branch doesn't exist"
      ],
      "solutions": [
        "Check repository access permissions",
        "Configure deploy key or SSH credentials",
        "Verify branch name in trigger"
      ]
    },
    {
      "error_pattern": "workspace.*permission denied",
      "description": "Cannot write to workspace directory",
      "causes": [
        "Volume permission issues",
        "Running as wrong user",
        "Previous step changed permissions"
      ],
      "solutions": [
        "Set user in container: user: root",
        "Fix permissions: chmod in step",
        "Use consistent user across steps"
      ]
    },
    {
      "error_pattern": "service.*unhealthy",
      "description": "Service container not healthy",
      "causes": [
        "Service not starting properly",
        "Health check failing",
        "Port not exposed"
      ],
      "solutions": [
        "Add wait logic in pipeline steps",
        "Check service logs",
        "Verify service configuration"
      ]
    },
    {
      "error_pattern": "trigger.*did not match",
      "description": "Pipeline not triggered for event",
      "causes": [
        "Trigger conditions not met",
        "Branch filter excluded",
        "Event type not matched"
      ],
      "solutions": [
        "Check trigger configuration",
        "Review branch/event filters",
        "Use trigger: event: [push, pull_request]"
      ]
    },
    {
      "error_pattern": "runner.*not available",
      "description": "No runner available to execute pipeline",
      "causes": [
        "No runners connected",
        "All runners busy",
        "Runner filter excludes all runners"
      ],
      "solutions": [
        "Start Drone runner: drone-runner-docker",
        "Check runner connectivity",
        "Review node selector/labels"
      ]
    },
    {
      "error_pattern": "environment.*not supported",
      "description": "Environment variable expansion issue",
      "causes": [
        "Wrong variable syntax",
        "Variable not set",
        "Escaping issue"
      ],
      "solutions": [
        "Use ${VAR} or $VAR syntax",
        "Check environment block",
        "Escape dollar signs: $$VAR for literal"
      ]
    }
  ]
}
