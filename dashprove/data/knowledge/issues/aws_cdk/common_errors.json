{
  "tool": "aws_cdk",
  "category": "cloud_cli",
  "common_errors": [
    {
      "pattern": "This stack uses assets.*bootstrap",
      "meaning": "CDK bootstrap not run for account/region",
      "causes": ["CDK bootstrap missing", "Bootstrap outdated", "Wrong account/region"],
      "solutions": ["Run cdk bootstrap aws://ACCOUNT/REGION", "Update bootstrap: cdk bootstrap --show-template", "Verify account and region"]
    },
    {
      "pattern": "cdk.*is not compatible",
      "meaning": "CDK CLI and library version mismatch",
      "causes": ["aws-cdk-lib version differs from CLI", "Multiple CDK versions in deps", "Old CLI"],
      "solutions": ["Match aws-cdk-lib version to CLI", "Run npm ls aws-cdk-lib", "Update CLI: npm install -g aws-cdk"]
    },
    {
      "pattern": "Cannot find module",
      "meaning": "Missing CDK construct or dependency",
      "causes": ["Package not installed", "Wrong import path", "Peer dependency missing"],
      "solutions": ["Install package: npm install <package>", "Check import statement", "Install peer dependencies"]
    },
    {
      "pattern": "Resolution error.*circular",
      "meaning": "Circular dependency in stack",
      "causes": ["Cross-stack references", "Mutual construct dependencies", "Token resolution loop"],
      "solutions": ["Break cycle with CfnOutput/Parameter", "Restructure dependencies", "Use Lazy values"]
    },
    {
      "pattern": "has been removed from the template",
      "meaning": "Resource unexpectedly being deleted",
      "causes": ["Logical ID changed", "Resource moved to different stack", "Code refactoring"],
      "solutions": ["Keep logical IDs stable", "Use overrideLogicalId()", "Move resources carefully"]
    },
    {
      "pattern": "UPDATE_ROLLBACK_COMPLETE",
      "meaning": "Stack update failed and rolled back",
      "causes": ["Resource creation failed", "Policy violation", "Dependency error"],
      "solutions": ["Check CloudFormation events", "Fix root cause", "Use --force to retry"]
    },
    {
      "pattern": "Resource.*already exists",
      "meaning": "Attempting to create existing resource",
      "causes": ["Name collision", "Import needed", "Orphaned resource"],
      "solutions": ["Use unique names", "Import existing resource", "Delete orphaned resource"]
    },
    {
      "pattern": "synthesis.*failed",
      "meaning": "CDK app synthesis failed",
      "causes": ["TypeScript/Python error", "Invalid construct config", "Missing context"],
      "solutions": ["Check stack trace for error", "Validate construct props", "Provide required context"]
    },
    {
      "pattern": "Cannot.*cross-stack reference",
      "meaning": "Invalid cross-stack reference",
      "causes": ["Cross-region reference", "Cross-account without sharing", "Nested stack limitation"],
      "solutions": ["Use same region for dependent stacks", "Set up cross-account sharing", "Use SSM Parameter Store"]
    },
    {
      "pattern": "You must bootstrap.*first",
      "meaning": "CDK bootstrap required before deploy",
      "causes": ["First CDK deploy to account/region", "Bootstrap deleted", "New major CDK version"],
      "solutions": ["Run cdk bootstrap", "Check CloudFormation for CDKToolkit stack", "Re-bootstrap for new CDK major"]
    }
  ],
  "debugging_commands": [
    "cdk doctor",
    "cdk diff",
    "cdk synth",
    "cdk context",
    "cdk --debug deploy"
  ],
  "documentation_urls": [
    "https://docs.aws.amazon.com/cdk/v2/guide/home.html",
    "https://github.com/aws/aws-cdk"
  ]
}
