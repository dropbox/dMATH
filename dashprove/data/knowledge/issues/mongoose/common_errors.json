{
  "tool": "mongoose",
  "category": "database_odm",
  "errors": [
    {
      "pattern": "MongooseServerSelectionError",
      "meaning": "Cannot connect to MongoDB",
      "causes": ["MongoDB not running", "Wrong connection string", "Network issue", "Atlas whitelist missing IP"],
      "solutions": ["Start MongoDB server", "Verify MONGODB_URI", "Add IP to Atlas whitelist", "Check network connectivity"]
    },
    {
      "pattern": "MongooseError: Operation.*buffering timed out",
      "meaning": "Query executed before connection established",
      "causes": ["Not awaiting mongoose.connect()", "Connection dropped", "Connection string invalid"],
      "solutions": ["Await mongoose.connect() before queries", "Add connection error handling", "Verify connection string format"]
    },
    {
      "pattern": "ValidationError.*required",
      "meaning": "Required field missing",
      "causes": ["Schema requires field not provided", "Field name mismatch", "Null/undefined value"],
      "solutions": ["Provide all required fields", "Check field names match schema", "Add default values in schema"]
    },
    {
      "pattern": "CastError.*ObjectId",
      "meaning": "Invalid ObjectId format",
      "causes": ["String not valid ObjectId", "Passing wrong type", "URL parameter not validated"],
      "solutions": ["Validate ObjectId before query", "Use mongoose.Types.ObjectId.isValid()", "Add middleware to validate params"]
    },
    {
      "pattern": "E11000 duplicate key error",
      "meaning": "Unique index violation",
      "causes": ["Duplicate value for unique field", "Index on null values", "Concurrent insert"],
      "solutions": ["Check for existing document first", "Handle error with try/catch", "Use findOneAndUpdate with upsert"]
    },
    {
      "pattern": "OverwriteModelError",
      "meaning": "Model compiled multiple times",
      "causes": ["Re-requiring model file", "Hot reload recompiling", "Multiple mongoose.model() calls"],
      "solutions": ["Use mongoose.models.Name || mongoose.model()", "Clear models in development", "Structure model exports properly"]
    },
    {
      "pattern": "MissingSchemaError",
      "meaning": "Schema not registered for model",
      "causes": ["Referencing model before definition", "Wrong model name in populate", "Circular dependency"],
      "solutions": ["Define schema before use", "Check model name spelling", "Use schema.pre() for references"]
    },
    {
      "pattern": "MongoExpiredSessionError",
      "meaning": "MongoDB session expired",
      "causes": ["Transaction took too long", "Session timeout", "Server restart during operation"],
      "solutions": ["Keep transactions short", "Increase transaction timeout", "Add retry logic"]
    },
    {
      "pattern": "strictQuery.*deprecated",
      "meaning": "Mongoose 7 strictQuery warning",
      "causes": ["Mongoose 7 changed default behavior", "Querying non-schema fields"],
      "solutions": ["Set mongoose.set('strictQuery', true/false)", "Update to explicit setting", "Review query fields"]
    }
  ]
}
