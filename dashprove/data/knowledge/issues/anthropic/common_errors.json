{
  "tool": "anthropic",
  "category": "ai_api",
  "common_errors": [
    {
      "id": "anthropic_install",
      "pattern": "anthropic not found|pip install|import error",
      "severity": "error",
      "causes": [
        "Package not installed",
        "Version mismatch",
        "Python version"
      ],
      "solutions": [
        "Install: pip install anthropic",
        "Requires Python 3.7+",
        "Check: anthropic --version"
      ]
    },
    {
      "id": "anthropic_api_key",
      "pattern": "API key|ANTHROPIC_API_KEY|authentication",
      "severity": "error",
      "causes": [
        "Missing API key",
        "Invalid key",
        "Key not set"
      ],
      "solutions": [
        "Set env: export ANTHROPIC_API_KEY=sk-ant-...",
        "Or: client = Anthropic(api_key='...')",
        "Get key from console.anthropic.com"
      ]
    },
    {
      "id": "anthropic_client",
      "pattern": "client|Anthropic|AsyncAnthropic",
      "severity": "info",
      "causes": [
        "Creating client",
        "Sync vs async",
        "Configuration"
      ],
      "solutions": [
        "Sync: client = Anthropic()",
        "Async: client = AsyncAnthropic()",
        "Messages: client.messages.create()"
      ]
    },
    {
      "id": "anthropic_messages",
      "pattern": "messages|message format|role",
      "severity": "error",
      "causes": [
        "Wrong message format",
        "Invalid role",
        "Content structure"
      ],
      "solutions": [
        "messages=[{'role': 'user', 'content': '...'}]",
        "Roles: 'user' or 'assistant'",
        "system param is separate, not in messages"
      ]
    },
    {
      "id": "anthropic_max_tokens",
      "pattern": "max_tokens|required|output length",
      "severity": "error",
      "causes": [
        "max_tokens is required",
        "Response truncated",
        "Token estimation"
      ],
      "solutions": [
        "max_tokens is required parameter",
        "Claude 3: up to 4096 output tokens",
        "Set based on expected response length"
      ]
    },
    {
      "id": "anthropic_streaming",
      "pattern": "streaming|stream|real-time",
      "severity": "info",
      "causes": [
        "Real-time response",
        "Long generation",
        "Progress display"
      ],
      "solutions": [
        "with client.messages.stream() as stream:",
        "for text in stream.text_stream:",
        "Or: stream=True in create()"
      ]
    },
    {
      "id": "anthropic_vision",
      "pattern": "vision|image|multimodal",
      "severity": "info",
      "causes": [
        "Processing images",
        "Claude 3 vision",
        "Image input"
      ],
      "solutions": [
        "content=[{'type': 'image', 'source': {...}}, {'type': 'text', ...}]",
        "source: {'type': 'base64', 'media_type': 'image/png', 'data': '...'}",
        "Or URL: {'type': 'url', 'url': '...'}"
      ]
    },
    {
      "id": "anthropic_tool_use",
      "pattern": "tool use|tools|function calling",
      "severity": "info",
      "causes": [
        "Function calling",
        "Tool integration",
        "Structured actions"
      ],
      "solutions": [
        "tools=[{'name': '...', 'description': '...', 'input_schema': {...}}]",
        "Check stop_reason for 'tool_use'",
        "Return tool results in subsequent message"
      ]
    }
  ]
}
