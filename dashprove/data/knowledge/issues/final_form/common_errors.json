{
  "tool": "final_form",
  "category": "form_validation",
  "common_errors": [
    {
      "pattern": "mutators.*is not a function|cannot read property 'push' of undefined",
      "meaning": "Field array helpers not configured",
      "causes": [
        "Array mutators not passed to createForm",
        "Using FieldArray without registered mutators"
      ],
      "solutions": [
        "Import mutators: import arrayMutators from 'final-form-arrays'",
        "Pass to createForm({ mutators: { ...arrayMutators } })",
        "Ensure FieldArray uses provided mutators props"
      ]
    },
    {
      "pattern": "value remains undefined|Field not updating",
      "meaning": "Field not subscribed to value changes",
      "causes": [
        "Field subscription missing 'value'",
        "Using useField without specifying subscription",
        "Render function not using input props"
      ],
      "solutions": [
        "Subscribe to needed keys: <Field name=\"email\" subscription={{ value: true, error: true }}>",
        "Spread input props: <input {...input} />",
        "Avoid omitting subscription so defaults apply"
      ]
    },
    {
      "pattern": "initialValues not applied|reset loses defaults",
      "meaning": "Form reset without initial value reference",
      "causes": [
        "initialValues not provided to createForm",
        "reset called with undefined",
        "initialValues mutated instead of replaced"
      ],
      "solutions": [
        "Provide initialValues when creating form",
        "Call form.reset(initialValues) to restore defaults",
        "Treat initialValues as immutable object"
      ]
    },
    {
      "pattern": "validate.*not running|errors never set",
      "meaning": "Validation function not returning error object",
      "causes": [
        "validate returns undefined instead of {}",
        "Thrown error not handled",
        "Schema validation async not awaited"
      ],
      "solutions": [
        "Return object keyed by field names for errors",
        "Handle async: const errors = await schema.validate(values, { abortEarly: false })",
        "Wrap thrown errors and map to error shape"
      ]
    },
    {
      "pattern": "onSubmit never resolves|submitting stuck",
      "meaning": "Submit promise not settled",
      "causes": [
        "onSubmit missing return value or promise resolution",
        "Thrown error without submitError handling",
        "PreventDefault without calling callback"
      ],
      "solutions": [
        "Return sync or async result: return submit(values)",
        "Catch errors and return { [FORM_ERROR]: message }",
        "Ensure onSubmit resolves even on failure"
      ]
    }
  ]
}
