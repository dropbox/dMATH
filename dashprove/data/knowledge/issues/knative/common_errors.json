{
  "tool": "knative",
  "category": "serverless_platform",
  "common_errors": [
    {
      "error_pattern": "revision.*not ready",
      "description": "Knative revision failed to become ready",
      "causes": [
        "Container image pull failed",
        "Application crashed on startup",
        "Readiness probe failing",
        "Resource limits exceeded"
      ],
      "solutions": [
        "Check revision status: kubectl get revision",
        "Describe revision: kubectl describe revision <name>",
        "View container logs: kubectl logs <pod>",
        "Verify image exists and is accessible"
      ]
    },
    {
      "error_pattern": "configuration.*invalid",
      "description": "Knative Service configuration has errors",
      "causes": [
        "Invalid container spec",
        "Missing required fields",
        "Port configuration wrong"
      ],
      "solutions": [
        "Check Service YAML for errors",
        "Ensure containerPort is set (default 8080)",
        "Verify image reference is correct"
      ]
    },
    {
      "error_pattern": "route.*not found",
      "description": "Knative route doesn't exist",
      "causes": [
        "Service not deployed",
        "Route name mismatch",
        "Namespace error"
      ],
      "solutions": [
        "Deploy service: kubectl apply -f service.yaml",
        "Check routes: kubectl get route",
        "Verify namespace is correct"
      ]
    },
    {
      "error_pattern": "scale.*from zero.*failed",
      "description": "Pod failed to scale from zero",
      "causes": [
        "Cold start too slow",
        "Activator timeout",
        "Resource quotas exceeded"
      ],
      "solutions": [
        "Increase activator timeout",
        "Use minScale: 1 to avoid cold starts",
        "Check resource quotas"
      ]
    },
    {
      "error_pattern": "ingress.*not ready",
      "description": "Knative ingress not configured",
      "causes": [
        "No ingress controller installed",
        "Gateway misconfigured",
        "DNS not set up"
      ],
      "solutions": [
        "Install ingress: kourier, istio, or contour",
        "Configure gateway for domain",
        "Set up DNS wildcard"
      ]
    },
    {
      "error_pattern": "domain mapping.*failed",
      "description": "Custom domain mapping not working",
      "causes": [
        "DNS not pointing to ingress",
        "TLS certificate missing",
        "DomainMapping resource wrong"
      ],
      "solutions": [
        "Configure DNS to point to ingress IP",
        "Set up cert-manager for TLS",
        "Check DomainMapping status"
      ]
    },
    {
      "error_pattern": "autoscaler.*target not found",
      "description": "Autoscaler cannot find target service",
      "causes": [
        "Service not deployed",
        "Metrics not available",
        "HPA misconfigured"
      ],
      "solutions": [
        "Verify service is running",
        "Check metrics-server installation",
        "Review autoscaling annotations"
      ]
    },
    {
      "error_pattern": "traffic.*split.*invalid",
      "description": "Traffic split configuration error",
      "causes": [
        "Percentages don't sum to 100",
        "Referenced revision doesn't exist",
        "Latest revision not ready"
      ],
      "solutions": [
        "Ensure traffic percentages sum to 100",
        "Use valid revision names",
        "Wait for revision to be ready"
      ]
    },
    {
      "error_pattern": "source.*not found",
      "description": "Knative Eventing source unavailable",
      "causes": [
        "Source CRD not installed",
        "Source type not supported",
        "Eventing not installed"
      ],
      "solutions": [
        "Install Knative Eventing",
        "Install specific source: PingSource, etc.",
        "Check available sources: kubectl api-resources | grep sources"
      ]
    },
    {
      "error_pattern": "broker.*not ready",
      "description": "Knative Broker not functioning",
      "causes": [
        "Broker not created",
        "Channel provider missing",
        "Eventing misconfigured"
      ],
      "solutions": [
        "Create broker: kubectl apply -f broker.yaml",
        "Install channel provider (in-memory, kafka)",
        "Check broker status: kubectl get broker"
      ]
    },
    {
      "error_pattern": "trigger.*not delivering",
      "description": "Events not reaching subscriber",
      "causes": [
        "Filter doesn't match events",
        "Subscriber not ready",
        "Broker not receiving events"
      ],
      "solutions": [
        "Check trigger filter matches event types",
        "Verify subscriber service is ready",
        "Test broker with debug pod"
      ]
    },
    {
      "error_pattern": "concurrency.*exceeded",
      "description": "Request concurrency limit reached",
      "causes": [
        "containerConcurrency too low",
        "Traffic spike",
        "Slow response times"
      ],
      "solutions": [
        "Increase containerConcurrency",
        "Scale up maxScale limit",
        "Optimize application response time"
      ]
    }
  ]
}
