{
  "tool": "woodpecker",
  "category": "ci_cd",
  "common_errors": [
    {
      "error_pattern": "yaml.*parse error",
      "description": "Invalid YAML in pipeline configuration",
      "causes": [
        "Syntax error in .woodpecker.yml",
        "Indentation problems",
        "Invalid characters"
      ],
      "solutions": [
        "Validate YAML syntax",
        "Use consistent indentation (2 spaces)",
        "Check for trailing whitespace"
      ]
    },
    {
      "error_pattern": "no pipeline definition found",
      "description": "Woodpecker cannot find pipeline config",
      "causes": [
        "Missing .woodpecker.yml file",
        "File in wrong location",
        "File not committed to repo"
      ],
      "solutions": [
        "Create .woodpecker.yml in repo root",
        "Or use .woodpecker/ directory with multiple files",
        "Commit configuration to repository"
      ]
    },
    {
      "error_pattern": "secret.*not found",
      "description": "Referenced secret doesn't exist",
      "causes": [
        "Secret not created in Woodpecker",
        "Secret name mismatch",
        "Repository not associated with secret"
      ],
      "solutions": [
        "Create secret in Woodpecker UI",
        "Use correct secret name in from_secret",
        "Check organization vs repository secrets"
      ]
    },
    {
      "error_pattern": "image.*not found",
      "description": "Docker image pull failed",
      "causes": [
        "Image doesn't exist",
        "Private registry auth missing",
        "Tag not available"
      ],
      "solutions": [
        "Verify image name: image: golang:1.21",
        "Configure registry credentials",
        "Use valid image tag"
      ]
    },
    {
      "error_pattern": "step.*failed.*exit code",
      "description": "Pipeline step exited with error",
      "causes": [
        "Command failed",
        "Test failure",
        "Build error"
      ],
      "solutions": [
        "Review step logs for error details",
        "Test commands locally first",
        "Add failure: ignore if non-critical"
      ]
    },
    {
      "error_pattern": "clone.*permission denied",
      "description": "Cannot clone repository",
      "causes": [
        "Access token invalid",
        "Repository private without auth",
        "SSH key issues"
      ],
      "solutions": [
        "Check repository permissions",
        "Configure git credentials",
        "Verify Woodpecker has repo access"
      ]
    },
    {
      "error_pattern": "agent.*offline",
      "description": "No Woodpecker agent available",
      "causes": [
        "Agent not running",
        "Agent disconnected",
        "Agent filters not matching"
      ],
      "solutions": [
        "Start Woodpecker agent",
        "Check agent connectivity to server",
        "Review platform/labels filters"
      ]
    },
    {
      "error_pattern": "matrix.*invalid",
      "description": "Matrix configuration error",
      "causes": [
        "Invalid matrix definition",
        "Empty matrix values",
        "Matrix not an array"
      ],
      "solutions": [
        "Define matrix as list: matrix: [GO: [1.20, 1.21]]",
        "Ensure matrix has valid values",
        "Use ${MATRIX_VAR} in steps"
      ]
    },
    {
      "error_pattern": "depends_on.*cycle",
      "description": "Circular dependency in steps",
      "causes": [
        "Step A depends on B, B depends on A",
        "Transitive circular dependency"
      ],
      "solutions": [
        "Review depends_on chains",
        "Break circular dependencies",
        "Restructure pipeline flow"
      ]
    },
    {
      "error_pattern": "when.*branch.*not match",
      "description": "Pipeline skipped due to branch filter",
      "causes": [
        "Branch not in when.branch list",
        "Exclude filter matched"
      ],
      "solutions": [
        "Update when.branch condition",
        "Use branch: [main, develop]",
        "Check exclude patterns"
      ]
    },
    {
      "error_pattern": "services.*not ready",
      "description": "Service container not started",
      "causes": [
        "Service failed to start",
        "Port not available",
        "Health check failing"
      ],
      "solutions": [
        "Check service logs",
        "Add startup delay in steps",
        "Verify service configuration"
      ]
    },
    {
      "error_pattern": "privileged.*not allowed",
      "description": "Privileged mode not permitted",
      "causes": [
        "Repository not trusted",
        "Admin hasn't enabled privileged"
      ],
      "solutions": [
        "Enable trusted repository in settings",
        "Request admin to allow privileged mode",
        "Use unprivileged alternatives"
      ]
    }
  ]
}
