{
  "tool": "prisma",
  "category": "database_migration",
  "common_errors": [
    {
      "pattern": "P1001.*Can't reach database server",
      "meaning": "Cannot connect to database",
      "causes": ["Database not running", "Wrong connection string", "Firewall blocking"],
      "solutions": ["Verify database is running", "Check DATABASE_URL format", "Allow connections on database port"]
    },
    {
      "pattern": "P1003.*Database.*does not exist",
      "meaning": "Target database doesn't exist",
      "causes": ["Database not created", "Wrong database name", "Connected to wrong server"],
      "solutions": ["Create database manually", "Run prisma migrate dev to create", "Verify database name in connection string"]
    },
    {
      "pattern": "P2002.*Unique constraint failed",
      "meaning": "Duplicate value for unique field",
      "causes": ["Inserting duplicate data", "Unique index violation", "Migration on existing data"],
      "solutions": ["Check for existing duplicate records", "Use upsert instead of create", "Clean up duplicate data before migration"]
    },
    {
      "pattern": "P2003.*Foreign key constraint failed",
      "meaning": "Foreign key reference invalid",
      "causes": ["Referenced record doesn't exist", "Deleting referenced record", "Wrong relation field"],
      "solutions": ["Ensure referenced record exists", "Use onDelete: Cascade if appropriate", "Check relation fields match"]
    },
    {
      "pattern": "P2025.*Record to .* not found",
      "meaning": "Record not found for operation",
      "causes": ["Delete/update on non-existent record", "Race condition", "Wrong where clause"],
      "solutions": ["Check record exists before operation", "Use findFirst before update", "Handle NotFoundError explicitly"]
    },
    {
      "pattern": "Migration.*already applied|drift detected",
      "meaning": "Database schema out of sync",
      "causes": ["Manual schema changes", "Migration applied outside Prisma", "Different migration history"],
      "solutions": ["Run prisma migrate dev to create new migration", "Use prisma db pull to sync schema", "Reset with prisma migrate reset (WARNING: data loss)"]
    },
    {
      "pattern": "Error validating.*datasource|schema validation",
      "meaning": "Invalid Prisma schema",
      "causes": ["Syntax error in schema.prisma", "Invalid type", "Missing required field"],
      "solutions": ["Run prisma validate", "Check schema syntax", "Ensure all required fields defined"]
    },
    {
      "pattern": "Prisma Client.*not generated|@prisma/client did not initialize",
      "meaning": "Prisma Client needs regeneration",
      "causes": ["Schema changed without generate", "Node modules cleared", "Wrong import path"],
      "solutions": ["Run prisma generate", "Reinstall node_modules", "Import from @prisma/client not generated path"]
    },
    {
      "pattern": "P3005.*column.*does not exist",
      "meaning": "Migration references non-existent column",
      "causes": ["Migration out of order", "Column renamed/dropped", "Schema drift"],
      "solutions": ["Check migration order", "Run prisma migrate status", "May need to reset migrations"]
    },
    {
      "pattern": "Cannot find module '@prisma/client'",
      "meaning": "Prisma Client not installed",
      "causes": ["Missing npm install", "Wrong package version", "Corrupted node_modules"],
      "solutions": ["npm install @prisma/client", "Delete node_modules and reinstall", "Check package.json has prisma deps"]
    }
  ],
  "debugging_commands": [
    "prisma validate",
    "prisma migrate status",
    "prisma db pull",
    "prisma migrate dev --create-only",
    "DATABASE_URL=... prisma migrate deploy"
  ],
  "documentation_urls": [
    "https://www.prisma.io/docs/",
    "https://github.com/prisma/prisma"
  ]
}
