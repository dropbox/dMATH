{
  "tool": "dotenv",
  "category": "config_management",
  "common_errors": [
    {
      "id": "dotenv_file_not_found",
      "pattern": "ENOENT.*\\.env|env file not found|Cannot find .env",
      "severity": "warning",
      "causes": [
        ".env file doesn't exist in project root",
        "Working directory is not project root",
        "Custom path not specified correctly"
      ],
      "solutions": [
        "Create .env file in project root",
        "Use dotenv.config({ path: '/custom/path/.env' })",
        "Ensure process starts from correct directory",
        "Check .env is not in .gitignore for local development"
      ]
    },
    {
      "id": "dotenv_variable_undefined",
      "pattern": "process\\.env\\.\\w+ is undefined|undefined environment variable",
      "severity": "error",
      "causes": [
        "Variable not defined in .env file",
        "dotenv.config() not called before access",
        "Variable name typo or case mismatch"
      ],
      "solutions": [
        "Add variable to .env file",
        "Call require('dotenv').config() at application entry",
        "Use -r dotenv/config flag when running node",
        "Check variable names are UPPERCASE by convention"
      ]
    },
    {
      "id": "dotenv_not_loading_in_production",
      "pattern": "variables empty in production|.env not loaded in prod",
      "severity": "error",
      "causes": [
        ".env file not deployed to production",
        "Different environment file needed",
        "Environment variables set via platform instead"
      ],
      "solutions": [
        "Use platform's secret management (Heroku Config Vars, etc.)",
        "Don't deploy .env - set vars in CI/CD",
        "Use dotenv-expand for variable expansion",
        "Create .env.production for production defaults"
      ]
    },
    {
      "id": "dotenv_override_not_working",
      "pattern": "override.*not working|system vars not overridden",
      "severity": "warning",
      "causes": [
        "dotenv doesn't override existing env vars by default",
        "System variables take precedence",
        "Multiple dotenv.config() calls"
      ],
      "solutions": [
        "Use dotenv.config({ override: true }) to override",
        "Check for system-level variables with same name",
        "Load .env.local after .env for overrides",
        "Unset system variable if .env should take precedence"
      ]
    },
    {
      "id": "dotenv_multiline_value",
      "pattern": "multiline.*not working|newline.*escaped|value truncated",
      "severity": "warning",
      "causes": [
        "Multiline values not properly quoted",
        "Newlines not preserved",
        "Wrong quote style used"
      ],
      "solutions": [
        "Use double quotes for multiline: KEY=\"line1\\nline2\"",
        "Or use actual newlines within double quotes",
        "Use dotenv-expand for complex variable interpolation",
        "Escape special characters properly"
      ]
    },
    {
      "id": "dotenv_expansion_failed",
      "pattern": "variable expansion.*failed|\\$\\{.*\\} not expanded",
      "severity": "warning",
      "causes": [
        "Variable expansion requires dotenv-expand",
        "Referenced variable not yet defined",
        "Wrong syntax for expansion"
      ],
      "solutions": [
        "Install and use dotenv-expand package",
        "Define referenced variables before use in .env",
        "Use ${VAR} syntax for expansion",
        "Check order of variable definitions"
      ]
    }
  ]
}
