{
  "tool": "react_hook_form",
  "category": "form_validation",
  "common_errors": [
    {
      "pattern": "Controller.*requires a defaultValue|defaultValue is missing",
      "meaning": "Controller field rendered without an initial value",
      "causes": [
        "Controller not given defaultValue prop",
        "defaultValues missing for field name",
        "Value reset when form re-mounted"
      ],
      "solutions": [
        "Pass defaultValue to each Controller",
        "Provide defaultValues in useForm({ defaultValues: { field: '' } })",
        "Reset with default values: reset(defaultValues)"
      ]
    },
    {
      "pattern": "A component is changing an uncontrolled input to be controlled",
      "meaning": "Field switches between undefined and defined value",
      "causes": [
        "Missing defaultValues for inputs",
        "Conditional render removes value from form state",
        "Value set to undefined/null after registration"
      ],
      "solutions": [
        "Always supply defaultValues for registered fields",
        "Use shouldUnregister: false if toggling fields",
        "Normalize null/undefined to '' or appropriate default"
      ]
    },
    {
      "pattern": "TypeError: register is not a function|useForm is undefined",
      "meaning": "react-hook-form APIs not available",
      "causes": [
        "Incorrect import (named vs default)",
        "Multiple versions in node_modules",
        "Hook called outside component function"
      ],
      "solutions": [
        "Import correctly: import { useForm } from 'react-hook-form'",
        "Deduplicate versions: npm ls react-hook-form; reinstall with --legacy-peer-deps if needed",
        "Call useForm inside React component body"
      ]
    },
    {
      "pattern": "Resolver.*not working|schema validation not running",
      "meaning": "Resolver not wired to useForm",
      "causes": [
        "resolver option omitted",
        "Async resolver not returning Promise",
        "Schema mismatch with field names"
      ],
      "solutions": [
        "Pass resolver: useForm({ resolver: zodResolver(schema) })",
        "Return Promise from custom resolver (async/await)",
        "Ensure schema keys match registered field names"
      ]
    },
    {
      "pattern": "onSubmit.*not called|handleSubmit not firing",
      "meaning": "Submit handler prevented",
      "causes": [
        "Validation errors prevent submission",
        "Missing type=\"submit\" on button",
        "handleSubmit wrapper not used"
      ],
      "solutions": [
        "Wrap submit: onSubmit={handleSubmit(fn)}",
        "Ensure submit button has type=\"submit\"",
        "Inspect formState.errors to resolve validation issues"
      ]
    },
    {
      "pattern": "watch.*returns undefined|useWatch not updating",
      "meaning": "Watch used outside provider or before registration",
      "causes": [
        "useWatch called without FormProvider context",
        "Field not registered yet",
        "Name mismatch between watch and register"
      ],
      "solutions": [
        "Wrap descendants with <FormProvider {...methods}>",
        "Register field before watching or pass defaultValue to useWatch",
        "Verify watched name matches register name exactly"
      ]
    }
  ]
}
