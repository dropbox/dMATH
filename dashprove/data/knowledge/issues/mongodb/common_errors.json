{
  "tool": "mongodb",
  "category": "database",
  "common_errors": [
    {
      "pattern": "Authentication failed",
      "meaning": "MongoDB authentication rejected",
      "causes": ["Wrong credentials", "User not in auth database", "Auth mechanism mismatch"],
      "solutions": ["Verify username/password", "Use authSource parameter", "Check auth mechanism (SCRAM-SHA-256)"]
    },
    {
      "pattern": "connection refused",
      "meaning": "Cannot connect to MongoDB server",
      "causes": ["mongod not running", "Wrong port", "bindIp setting"],
      "solutions": ["Start mongod", "Check port (default 27017)", "Set bindIp: 0.0.0.0 for remote"]
    },
    {
      "pattern": "E11000 duplicate key error",
      "meaning": "Unique index constraint violation",
      "causes": ["Duplicate _id or unique field", "Race condition", "Sparse index issue"],
      "solutions": ["Use upsert: true", "Generate unique _id client-side", "Check unique index fields"]
    },
    {
      "pattern": "not primary",
      "meaning": "Write attempted on secondary node",
      "causes": ["Connected to secondary", "Primary stepped down", "Wrong connection string"],
      "solutions": ["Connect to primary", "Use replica set connection string", "Use readPreference: primary for writes"]
    },
    {
      "pattern": "operation exceeded time limit",
      "meaning": "Query exceeded maxTimeMS",
      "causes": ["Query too slow", "Missing indexes", "Large result set"],
      "solutions": ["Add indexes", "Use explain() to optimize", "Increase maxTimeMS"]
    },
    {
      "pattern": "cursor not found",
      "meaning": "Server cursor expired or lost",
      "causes": ["Cursor timeout", "Server failover", "Cursor batch exhausted"],
      "solutions": ["Use noCursorTimeout()", "Re-run query", "Increase cursor batch size"]
    },
    {
      "pattern": "write concern error",
      "meaning": "Write didn't achieve requested durability",
      "causes": ["Replica set members down", "Network partition", "Write concern too strict"],
      "solutions": ["Check replica set health", "Lower write concern", "Wait for members to recover"]
    },
    {
      "pattern": "Document.*exceeds maximum",
      "meaning": "Document exceeds 16MB limit",
      "causes": ["Document too large", "Arrays growing unbounded", "Embedded documents too deep"],
      "solutions": ["Use GridFS for large files", "Reference documents instead of embedding", "Limit array sizes"]
    },
    {
      "pattern": "NamespaceNotFound",
      "meaning": "Collection or database doesn't exist",
      "causes": ["Collection not created", "Typo in name", "Database dropped"],
      "solutions": ["Create collection explicitly", "Check collection name", "Verify database exists"]
    },
    {
      "pattern": "ShardKeyNotFound",
      "meaning": "Shard key missing from document",
      "causes": ["Document missing shard key field", "Wrong field name", "Null shard key value"],
      "solutions": ["Include shard key in document", "Check shard key field name", "Provide non-null shard key"]
    }
  ],
  "debugging_commands": [
    "db.currentOp()",
    "db.serverStatus()",
    "rs.status()",
    "db.collection.explain().find({})",
    "db.collection.getIndexes()"
  ],
  "documentation_urls": [
    "https://docs.mongodb.com/",
    "https://github.com/mongodb/mongo"
  ]
}
