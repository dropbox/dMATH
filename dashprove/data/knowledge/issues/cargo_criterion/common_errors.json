{
  "tool": "cargo_criterion",
  "category": "rust_benchmarking",
  "common_errors": [
    {
      "id": "criterion_setup",
      "pattern": "criterion setup|benchmark not found|benches",
      "severity": "error",
      "causes": [
        "Benchmark not configured",
        "Wrong directory structure",
        "Cargo.toml missing bench"
      ],
      "solutions": [
        "Add to Cargo.toml: [[bench]] name = 'my_bench' harness = false",
        "Create benches/my_bench.rs",
        "Import: use criterion::{criterion_group, criterion_main}"
      ]
    },
    {
      "id": "criterion_run",
      "pattern": "cargo bench|cargo criterion|benchmark runner",
      "severity": "info",
      "causes": [
        "How to run benchmarks",
        "Using cargo-criterion vs cargo bench",
        "Filter benchmarks"
      ],
      "solutions": [
        "cargo bench -- benchmark_name",
        "Or install: cargo install cargo-criterion",
        "Then: cargo criterion"
      ]
    },
    {
      "id": "criterion_regression",
      "pattern": "regression|baseline|comparison",
      "severity": "warning",
      "causes": [
        "Performance regression detected",
        "Baseline comparison",
        "Noise in measurements"
      ],
      "solutions": [
        "Save baseline: cargo bench -- --save-baseline base",
        "Compare: cargo bench -- --baseline base",
        "Check if change is statistically significant"
      ]
    },
    {
      "id": "criterion_black_box",
      "pattern": "black_box|optimized away|benchmark not measuring",
      "severity": "error",
      "causes": [
        "Compiler optimizing away code",
        "Result not used",
        "Dead code elimination"
      ],
      "solutions": [
        "Use criterion::black_box(result)",
        "Or std::hint::black_box (Rust 1.66+)",
        "Wrap inputs and outputs"
      ]
    },
    {
      "id": "criterion_measurement_time",
      "pattern": "measurement time|too slow|sample size",
      "severity": "info",
      "causes": [
        "Benchmarks take too long",
        "Not enough samples",
        "Default time too short/long"
      ],
      "solutions": [
        ".measurement_time(Duration::from_secs(10))",
        ".sample_size(50) for fewer samples",
        "Configure per-benchmark"
      ]
    },
    {
      "id": "criterion_parameterized",
      "pattern": "parameterized|benchmark_group|with_function",
      "severity": "info",
      "causes": [
        "Benchmark multiple inputs",
        "Compare implementations",
        "Group related benchmarks"
      ],
      "solutions": [
        "Use BenchmarkGroup for parameterized",
        "group.bench_with_input(id, input, |b, i| {})",
        "throughput(Throughput::Elements(n))"
      ]
    },
    {
      "id": "criterion_html_report",
      "pattern": "html report|graphs|visualization",
      "severity": "info",
      "causes": [
        "View benchmark results",
        "Generate graphs",
        "Performance history"
      ],
      "solutions": [
        "Reports in target/criterion/",
        "Open report/index.html",
        "cargo-criterion generates cleaner reports"
      ]
    },
    {
      "id": "criterion_async",
      "pattern": "async benchmark|tokio|async-std",
      "severity": "info",
      "causes": [
        "Benchmarking async code",
        "Runtime setup",
        "Block_on issues"
      ],
      "solutions": [
        "Use to_async(tokio::runtime::Runtime::new())",
        "Or criterion::async_executor::AsyncStdExecutor",
        "b.to_async(&runtime).iter(|| async {})"
      ]
    }
  ]
}
