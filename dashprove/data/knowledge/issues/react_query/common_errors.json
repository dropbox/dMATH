{
  "tool": "react_query",
  "category": "data_fetching",
  "common_errors": [
    {
      "id": "rq_queryclient_provider",
      "pattern": "QueryClient|No QueryClient|provider missing",
      "severity": "error",
      "causes": [
        "QueryClientProvider not wrapping app",
        "QueryClient not created",
        "Hook used outside provider"
      ],
      "solutions": [
        "Create: const queryClient = new QueryClient()",
        "Wrap app: <QueryClientProvider client={queryClient}>",
        "Place provider at app root"
      ]
    },
    {
      "id": "rq_query_key",
      "pattern": "queryKey|key collision|cache miss",
      "severity": "warning",
      "causes": [
        "Query keys not unique",
        "Key structure inconsistent",
        "Dynamic keys wrong"
      ],
      "solutions": [
        "Use array keys: ['todos', userId]",
        "Include all query parameters in key",
        "Factory pattern: queryKeys.todos.list(userId)"
      ]
    },
    {
      "id": "rq_stale_time",
      "pattern": "staleTime|refetch|data stale",
      "severity": "info",
      "causes": [
        "Default staleTime is 0",
        "Too many refetches",
        "Want cached data longer"
      ],
      "solutions": [
        "Set staleTime: 1000 * 60 (1 min)",
        "Infinity for data that never goes stale",
        "Configure per-query or in defaults"
      ]
    },
    {
      "id": "rq_mutation_optimistic",
      "pattern": "optimistic update|onMutate|rollback",
      "severity": "info",
      "causes": [
        "Want instant UI update",
        "Need rollback on error",
        "Cache update before server"
      ],
      "solutions": [
        "Use onMutate to update cache",
        "Return context for rollback",
        "onError: restore previous state"
      ]
    },
    {
      "id": "rq_infinite_query",
      "pattern": "useInfiniteQuery|getNextPageParam|pagination",
      "severity": "error",
      "causes": [
        "getNextPageParam not returning",
        "Pages not accumulated",
        "Wrong data structure"
      ],
      "solutions": [
        "getNextPageParam must return next param or undefined",
        "Access data: data.pages.flatMap()",
        "hasNextPage checks if more pages"
      ]
    },
    {
      "id": "rq_enabled_option",
      "pattern": "enabled|conditional query|dependent query",
      "severity": "info",
      "causes": [
        "Query running when shouldn't",
        "Dependent on other data",
        "Conditional fetching"
      ],
      "solutions": [
        "Use enabled: false to prevent auto-fetch",
        "enabled: !!userId for dependent",
        "Manual: refetch() when ready"
      ]
    },
    {
      "id": "rq_devtools",
      "pattern": "devtools|debug|react query devtools",
      "severity": "info",
      "causes": [
        "Need to debug queries",
        "Inspect cache state",
        "See query status"
      ],
      "solutions": [
        "npm i @tanstack/react-query-devtools",
        "Add <ReactQueryDevtools />",
        "Shows in development only"
      ]
    },
    {
      "id": "rq_prefetch",
      "pattern": "prefetch|initial data|server side",
      "severity": "info",
      "causes": [
        "Want data before render",
        "SSR hydration",
        "Route prefetching"
      ],
      "solutions": [
        "queryClient.prefetchQuery()",
        "initialData in useQuery options",
        "For SSR: dehydrate/Hydrate"
      ]
    }
  ]
}
