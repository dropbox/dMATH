{
  "tool": "langchain",
  "category": "ai_framework",
  "common_errors": [
    {
      "id": "langchain_install",
      "pattern": "import error|langchain not found|package split",
      "severity": "error",
      "causes": [
        "Package restructuring",
        "Wrong import path",
        "Multiple packages needed"
      ],
      "solutions": [
        "Core: pip install langchain",
        "OpenAI: pip install langchain-openai",
        "Community: pip install langchain-community",
        "Packages split into langchain-* modules"
      ]
    },
    {
      "id": "langchain_api_key",
      "pattern": "API key|OPENAI_API_KEY|authentication",
      "severity": "error",
      "causes": [
        "Missing API key",
        "Wrong env var name",
        "Key not loaded"
      ],
      "solutions": [
        "Set env: export OPENAI_API_KEY=sk-...",
        "Or pass directly: ChatOpenAI(api_key='...')",
        "Use python-dotenv for .env files"
      ]
    },
    {
      "id": "langchain_deprecation",
      "pattern": "deprecation|deprecated|legacy",
      "severity": "warning",
      "causes": [
        "Using old API",
        "LangChain evolving quickly",
        "LCEL migration"
      ],
      "solutions": [
        "Use LCEL (LangChain Expression Language)",
        "chain = prompt | llm | parser",
        "Check migration guides"
      ]
    },
    {
      "id": "langchain_memory",
      "pattern": "memory|conversation history|chat history",
      "severity": "info",
      "causes": [
        "Maintaining conversation state",
        "Memory types",
        "State management"
      ],
      "solutions": [
        "Use ChatMessageHistory for simple history",
        "RunnableWithMessageHistory for LCEL",
        "ConversationBufferMemory for legacy chains"
      ]
    },
    {
      "id": "langchain_retriever",
      "pattern": "retriever|RAG|vector store",
      "severity": "info",
      "causes": [
        "Document retrieval setup",
        "Vector store integration",
        "Embedding issues"
      ],
      "solutions": [
        "vectorstore.as_retriever()",
        "Set search_type, search_kwargs",
        "retriever | format_docs for LCEL"
      ]
    },
    {
      "id": "langchain_output_parser",
      "pattern": "output parser|parse error|structured output",
      "severity": "error",
      "causes": [
        "LLM output doesn't match expected format",
        "JSON parsing fails",
        "Schema mismatch"
      ],
      "solutions": [
        "Use PydanticOutputParser with schema",
        "with_structured_output() for native support",
        "Include format_instructions in prompt"
      ]
    },
    {
      "id": "langchain_streaming",
      "pattern": "streaming|stream|real-time output",
      "severity": "info",
      "causes": [
        "Want streaming responses",
        "Long generation",
        "UI feedback"
      ],
      "solutions": [
        "for chunk in chain.stream(input):",
        "astream for async",
        "streaming=True in LLM config (legacy)"
      ]
    },
    {
      "id": "langchain_callbacks",
      "pattern": "callback|tracing|langsmith",
      "severity": "info",
      "causes": [
        "Debugging chains",
        "Logging/monitoring",
        "Cost tracking"
      ],
      "solutions": [
        "Enable LangSmith: export LANGCHAIN_TRACING_V2=true",
        "Or use callbacks: config={'callbacks': [handler]}",
        "ConsoleCallbackHandler for debug"
      ]
    }
  ]
}
