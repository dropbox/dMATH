{
  "tool": "bookshelf",
  "category": "database_orm",
  "description": "Bookshelf.js - ORM for Node.js built on Knex",
  "errors": [
    {
      "pattern": "EmptyError.*No Rows",
      "meaning": "Query returned no results with require",
      "causes": ["Record doesn't exist", "Wrong query conditions", "Using fetch({require: true})"],
      "solutions": ["Use fetch() without require", "Check query conditions", "Handle NotFoundError"]
    },
    {
      "pattern": "knex.*not defined|bookshelf.*not initialized",
      "meaning": "Bookshelf not properly initialized",
      "causes": ["Missing bookshelf(knex) call", "Import order issue", "Knex not created first"],
      "solutions": ["Initialize bookshelf with knex instance", "Check initialization order", "Export bookshelf instance properly"]
    },
    {
      "pattern": "hasMany.*no.*tableName",
      "meaning": "Model missing tableName",
      "causes": ["tableName not defined on model", "Using wrong model", "Model not extending properly"],
      "solutions": ["Add tableName property to model", "Verify model definition", "Extend bookshelf.Model correctly"]
    },
    {
      "pattern": "circular.*dependency",
      "meaning": "Circular model dependency",
      "causes": ["Models requiring each other", "Relation definitions causing loop"],
      "solutions": ["Use registry plugin", "Lazy require in relations", "Register models before defining relations"]
    },
    {
      "pattern": "cannot.*idAttribute",
      "meaning": "Primary key configuration issue",
      "causes": ["Custom primary key not defined", "idAttribute mismatch", "Composite key not supported"],
      "solutions": ["Set idAttribute on model", "Ensure idAttribute matches DB", "Use single primary key"]
    },
    {
      "pattern": "ER_DUP_ENTRY|unique constraint",
      "meaning": "Duplicate key error",
      "causes": ["Inserting duplicate unique value", "Upsert not handled", "Concurrent insert race"],
      "solutions": ["Check before insert", "Use forge().save() with patch", "Handle error in catch block"]
    },
    {
      "pattern": "withRelated.*not.*relation",
      "meaning": "Unknown relation in withRelated",
      "causes": ["Relation name typo", "Relation not defined on model", "Wrong model queried"],
      "solutions": ["Check relation name in model", "Verify relation definition", "Use correct model for query"]
    },
    {
      "pattern": "serialize.*toJSON",
      "meaning": "Serialization issue",
      "causes": ["Custom serialize breaking", "Circular reference in output", "Hidden fields exposed"],
      "solutions": ["Override serialize() method", "Use virtuals plugin for computed fields", "Define hidden/visible arrays"]
    }
  ]
}
