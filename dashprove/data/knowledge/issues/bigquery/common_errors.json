{
  "tool": "bigquery",
  "category": "gcp_analytics",
  "description": "Google BigQuery - serverless data warehouse",
  "common_errors": [
    {
      "id": "access_denied",
      "pattern": "Access Denied",
      "regex": "(?i)access.*denied|permission.*denied|user.*does.*not.*have|403",
      "cause": "IAM permissions insufficient for BigQuery operation",
      "solution": "Grant bigquery.dataViewer, bigquery.dataEditor, or bigquery.admin role, check dataset-level permissions",
      "severity": "high",
      "category": "permissions"
    },
    {
      "id": "not_found",
      "pattern": "Not found",
      "regex": "(?i)not.*found|table.*not.*found|dataset.*not.*found|404",
      "cause": "Dataset, table, or view does not exist",
      "solution": "Verify dataset/table names, check project ID, create resource if needed",
      "severity": "medium",
      "category": "resources"
    },
    {
      "id": "syntax_error",
      "pattern": "Syntax error",
      "regex": "(?i)syntax.*error|unexpected.*token|parse.*error|invalid.*query",
      "cause": "SQL query syntax error",
      "solution": "Use Standard SQL (not Legacy SQL), check column names and keywords, validate query in BigQuery Console",
      "severity": "medium",
      "category": "query"
    },
    {
      "id": "quota_exceeded",
      "pattern": "Quota exceeded",
      "regex": "(?i)quota.*exceeded|billing.*error|rate.*limit|concurrent.*queries",
      "cause": "BigQuery quota or rate limit exceeded",
      "solution": "Wait and retry, request quota increase, optimize query to scan less data, use query priority settings",
      "severity": "medium",
      "category": "limits"
    },
    {
      "id": "timeout",
      "pattern": "Query timeout",
      "regex": "(?i)timeout|job.*failed|exceeded.*maximum|query.*cancelled",
      "cause": "Query execution exceeded time limit",
      "solution": "Optimize query, use partitioning/clustering, increase timeout for batch queries, use BI Engine for interactive",
      "severity": "medium",
      "category": "performance"
    },
    {
      "id": "type_mismatch",
      "pattern": "Type mismatch",
      "regex": "(?i)type.*mismatch|incompatible.*types|cannot.*coerce|invalid.*cast",
      "cause": "Data type mismatch in query or schema",
      "solution": "Use CAST() or SAFE_CAST() for type conversion, verify schema compatibility",
      "severity": "medium",
      "category": "schema"
    },
    {
      "id": "streaming_insert",
      "pattern": "insertErrors",
      "regex": "(?i)insert.*error|streaming.*insert|invalid.*row|failed.*to.*insert",
      "cause": "Streaming insert validation or quota error",
      "solution": "Check row size limits (1MB), verify schema compatibility, handle individual row errors",
      "severity": "medium",
      "category": "ingestion"
    },
    {
      "id": "partition_error",
      "pattern": "PartitioningError",
      "regex": "(?i)partition|invalid.*partition|partition.*filter|required.*partition.*filter",
      "cause": "Partition filter required or partition configuration error",
      "solution": "Add partition filter in WHERE clause, verify partition column exists, check partition type",
      "severity": "medium",
      "category": "partitioning"
    },
    {
      "id": "slot_error",
      "pattern": "Slot",
      "regex": "(?i)slot|reservation|capacity|insufficient.*resources",
      "cause": "Insufficient BigQuery slots or reservation issue",
      "solution": "Use on-demand pricing, purchase slot reservations, optimize query concurrency",
      "severity": "medium",
      "category": "capacity"
    },
    {
      "id": "external_table_error",
      "pattern": "ExternalTable",
      "regex": "(?i)external.*table|gcs.*error|file.*not.*found|schema.*detection",
      "cause": "External table (GCS) access or schema issue",
      "solution": "Verify GCS bucket permissions, check file format, define explicit schema for external table",
      "severity": "medium",
      "category": "external"
    }
  ],
  "related_tools": ["gcloud", "bq", "dataflow"],
  "documentation_url": "https://cloud.google.com/bigquery/docs"
}
