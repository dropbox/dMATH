{
  "tool": "accelerate",
  "category": "ai_ml",
  "common_errors": [
    {
      "id": "accelerate_install",
      "pattern": "pip install accelerate|import error",
      "severity": "error",
      "causes": [
        "Package not installed",
        "Version mismatch",
        "Optional deps"
      ],
      "solutions": [
        "Install: pip install accelerate",
        "For DeepSpeed: pip install accelerate[deepspeed]",
        "Update: pip install -U accelerate"
      ]
    },
    {
      "id": "accelerate_config",
      "pattern": "accelerate config|configuration|setup",
      "severity": "info",
      "causes": [
        "First time setup",
        "Multi-GPU config",
        "Mixed precision"
      ],
      "solutions": [
        "Run: accelerate config",
        "Interactive wizard for setup",
        "Creates ~/.cache/huggingface/accelerate/default_config.yaml"
      ]
    },
    {
      "id": "accelerate_launch",
      "pattern": "accelerate launch|run script|distributed",
      "severity": "info",
      "causes": [
        "Running distributed training",
        "Multi-GPU execution",
        "Script launch"
      ],
      "solutions": [
        "accelerate launch script.py",
        "--num_processes 2 for multi-GPU",
        "--mixed_precision fp16 for speed"
      ]
    },
    {
      "id": "accelerate_prepare",
      "pattern": "prepare|model|dataloader",
      "severity": "error",
      "causes": [
        "Objects not prepared",
        "Device mismatch",
        "Distributed setup"
      ],
      "solutions": [
        "model, optimizer, dataloader = accelerator.prepare(...)",
        "Call prepare() on all training objects",
        "Handles device placement automatically"
      ]
    },
    {
      "id": "accelerate_mixed_precision",
      "pattern": "mixed precision|fp16|bf16",
      "severity": "info",
      "causes": [
        "Memory optimization",
        "Training speed",
        "Precision settings"
      ],
      "solutions": [
        "Accelerator(mixed_precision='fp16')",
        "Or 'bf16' for newer GPUs",
        "Or set via accelerate config"
      ]
    },
    {
      "id": "accelerate_gradient",
      "pattern": "gradient accumulation|backward|sync gradients",
      "severity": "warning",
      "causes": [
        "Large effective batch size",
        "Memory constraints",
        "Gradient sync"
      ],
      "solutions": [
        "Accelerator(gradient_accumulation_steps=4)",
        "with accelerator.accumulate(model):",
        "accelerator.backward(loss)"
      ]
    },
    {
      "id": "accelerate_save_load",
      "pattern": "save_state|load_state|checkpoint",
      "severity": "info",
      "causes": [
        "Checkpointing",
        "Resume training",
        "State saving"
      ],
      "solutions": [
        "accelerator.save_state('checkpoint/')",
        "accelerator.load_state('checkpoint/')",
        "Saves model, optimizer, scheduler, etc"
      ]
    },
    {
      "id": "accelerate_main_process",
      "pattern": "main_process|is_main_process|logging",
      "severity": "warning",
      "causes": [
        "Duplicate logging",
        "Saving only once",
        "Process rank"
      ],
      "solutions": [
        "if accelerator.is_main_process:",
        "accelerator.print() for main only",
        "Prevent duplicate saves/logs"
      ]
    }
  ]
}
