{
  "tool": "react",
  "category": "framework",
  "common_errors": [
    {
      "id": "react_hooks_rules",
      "pattern": "hooks rules|hook called conditionally|hook in loop",
      "severity": "error",
      "causes": [
        "Hook called inside condition",
        "Hook called in loop",
        "Hook order changes between renders"
      ],
      "solutions": [
        "Call hooks at top level only",
        "Don't call hooks inside conditions/loops",
        "Use eslint-plugin-react-hooks"
      ]
    },
    {
      "id": "react_useeffect_deps",
      "pattern": "useEffect infinite loop|missing dependency|exhaustive-deps",
      "severity": "error",
      "causes": [
        "Missing dependency in array",
        "Object/function recreated each render",
        "Dependency causes effect to re-run"
      ],
      "solutions": [
        "Add all dependencies to array",
        "Use useMemo/useCallback for objects/functions",
        "Use functional setState: setValue(prev => prev + 1)"
      ]
    },
    {
      "id": "react_stale_closure",
      "pattern": "stale closure|old value in callback|state not updated",
      "severity": "error",
      "causes": [
        "Callback captures old state value",
        "Timer/event handler has stale reference",
        "Missing useCallback dependency"
      ],
      "solutions": [
        "Use functional update: setState(prev => ...)",
        "Use ref for mutable values: useRef",
        "Add dependencies to useCallback"
      ]
    },
    {
      "id": "react_key_prop",
      "pattern": "key prop|key warning|list keys",
      "severity": "warning",
      "causes": [
        "Missing key in list",
        "Using index as key",
        "Non-unique keys"
      ],
      "solutions": [
        "Add unique key: <Item key={item.id} />",
        "Don't use index unless list is static",
        "Key must be stable string/number"
      ]
    },
    {
      "id": "react_controlled_uncontrolled",
      "pattern": "controlled to uncontrolled|uncontrolled input|value undefined",
      "severity": "warning",
      "causes": [
        "Switching between controlled/uncontrolled",
        "Initial value undefined",
        "Missing onChange handler"
      ],
      "solutions": [
        "Use empty string for initial: useState('')",
        "Controlled: value + onChange",
        "Uncontrolled: defaultValue + ref"
      ]
    },
    {
      "id": "react_state_batching",
      "pattern": "state not batched|multiple setState|race condition",
      "severity": "warning",
      "causes": [
        "Multiple state updates",
        "State in setTimeout not batched (pre-18)",
        "Expecting synchronous update"
      ],
      "solutions": [
        "React 18 batches all updates automatically",
        "Use flushSync() if sync needed",
        "Combine related state into single object"
      ]
    },
    {
      "id": "react_useref_current",
      "pattern": "ref.current undefined|ref not attached|forwardRef",
      "severity": "error",
      "causes": [
        "Ref not attached to element",
        "Accessing ref before mount",
        "Need forwardRef for components"
      ],
      "solutions": [
        "Access ref.current in useEffect/handlers",
        "Use forwardRef for component refs",
        "useImperativeHandle for custom ref API"
      ]
    },
    {
      "id": "react_context_rerender",
      "pattern": "context causing rerender|context performance|memo not working",
      "severity": "warning",
      "causes": [
        "Context value changes every render",
        "Object literal as value",
        "All consumers rerender"
      ],
      "solutions": [
        "Memoize context value: useMemo()",
        "Split contexts by update frequency",
        "Consider state management library"
      ]
    }
  ]
}
