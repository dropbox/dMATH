{
  "tool": "chalk",
  "category": "terminal",
  "common_errors": [
    {
      "id": "chalk_v5_esm_only",
      "pattern": "ERR_REQUIRE_ESM|not a function|chalk is undefined",
      "severity": "error",
      "causes": [
        "chalk v5+ is ESM-only",
        "Using require() instead of import",
        "CommonJS project using new chalk"
      ],
      "solutions": [
        "v5+: import chalk from 'chalk'",
        "Use v4.x for CommonJS: npm i chalk@4",
        "Or use dynamic import: const chalk = (await import('chalk')).default",
        "Consider using ansi-colors as CJS alternative"
      ]
    },
    {
      "id": "chalk_no_colors",
      "pattern": "colors not showing|plain text output|ANSI codes visible",
      "severity": "warning",
      "causes": [
        "Terminal doesn't support colors",
        "FORCE_COLOR=0 environment variable",
        "Piping output disables colors"
      ],
      "solutions": [
        "Set FORCE_COLOR=1 to force colors",
        "Check chalk.level for supported level",
        "Use { level: 3 } in Chalk constructor for full colors",
        "Piped output: FORCE_COLOR=1 node script.js | cat"
      ]
    },
    {
      "id": "chalk_template_literal",
      "pattern": "template literal error|tagged template|chalk`template`",
      "severity": "warning",
      "causes": [
        "chalk-template is separate package now",
        "Template syntax changed in v5",
        "Missing chalk-template import"
      ],
      "solutions": [
        "Install: npm i chalk-template",
        "Import: import chalkTemplate from 'chalk-template'",
        "Use: chalkTemplate`{red text}`",
        "v4: chalk.red`text` worked but not in v5"
      ]
    },
    {
      "id": "chalk_nesting_issue",
      "pattern": "styles not nesting|color bleeding|nested styles broken",
      "severity": "warning",
      "causes": [
        "Incorrect nesting syntax",
        "Mixing call styles",
        "String concatenation breaking styles"
      ],
      "solutions": [
        "Nest correctly: chalk.red.bold('text')",
        "Or chain: chalk.red(chalk.bold('text'))",
        "Don't concatenate styled strings",
        "Use template literals for complex formatting"
      ]
    },
    {
      "id": "chalk_ci_detection",
      "pattern": "no colors in CI|Jenkins.*plain|GitHub Actions colors",
      "severity": "warning",
      "causes": [
        "CI environment not detected correctly",
        "CI doesn't support ANSI colors",
        "TERM not set in CI"
      ],
      "solutions": [
        "Set FORCE_COLOR=1 in CI environment",
        "GitHub Actions supports colors by default",
        "Jenkins: use AnsiColor plugin",
        "Set TERM=xterm-256color in CI"
      ]
    },
    {
      "id": "chalk_windows_terminal",
      "pattern": "Windows.*no color|cmd\\.exe.*escape codes|PowerShell colors",
      "severity": "warning",
      "causes": [
        "Old Windows Command Prompt issues",
        "ANSI escape code support varies",
        "Windows Terminal vs cmd.exe"
      ],
      "solutions": [
        "Windows Terminal supports colors natively",
        "PowerShell Core supports colors",
        "Older cmd.exe: may need ansicon or chalk handles",
        "chalk auto-detects most Windows terminals"
      ]
    }
  ]
}
