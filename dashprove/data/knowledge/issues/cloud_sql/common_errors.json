{
  "tool": "cloud_sql",
  "category": "gcp_database",
  "description": "Google Cloud SQL - managed relational database service",
  "common_errors": [
    {
      "id": "connection_failed",
      "pattern": "Connection failed",
      "regex": "(?i)connection.*failed|cannot.*connect|timeout|host.*unreachable",
      "cause": "Cannot establish connection to Cloud SQL instance",
      "solution": "Use Cloud SQL Auth Proxy, configure authorized networks, check private IP/VPC settings",
      "severity": "high",
      "category": "connectivity"
    },
    {
      "id": "auth_failed",
      "pattern": "Access denied",
      "regex": "(?i)access.*denied|authentication.*failed|invalid.*password|login.*failed",
      "cause": "Database authentication failed",
      "solution": "Verify database user credentials, use Cloud SQL Admin API to reset password, check IAM database authentication",
      "severity": "high",
      "category": "authentication"
    },
    {
      "id": "proxy_error",
      "pattern": "Cloud SQL Proxy",
      "regex": "(?i)cloud.*sql.*proxy|proxy.*error|failed.*to.*dial|connection.*name",
      "cause": "Cloud SQL Auth Proxy connection failed",
      "solution": "Verify connection name format (project:region:instance), ensure cloudsql.client role, check proxy version",
      "severity": "high",
      "category": "proxy"
    },
    {
      "id": "max_connections",
      "pattern": "too many connections",
      "regex": "(?i)too.*many.*connections|max.*connections|connection.*limit|pool.*exhausted",
      "cause": "Database connection limit exceeded",
      "solution": "Use connection pooling, increase max_connections flag, upgrade instance tier, close idle connections",
      "severity": "high",
      "category": "connections"
    },
    {
      "id": "storage_full",
      "pattern": "storage full",
      "regex": "(?i)storage.*full|disk.*full|no.*space|storage.*exceeded",
      "cause": "Cloud SQL storage capacity exhausted",
      "solution": "Enable automatic storage increase, manually increase storage, clean up data/logs",
      "severity": "high",
      "category": "storage"
    },
    {
      "id": "ssl_required",
      "pattern": "SSL",
      "regex": "(?i)ssl.*required|ssl.*connection|certificate.*verify|tls.*handshake",
      "cause": "SSL/TLS connection required but not configured",
      "solution": "Download server certificate, configure client SSL mode, use Cloud SQL Auth Proxy for automatic SSL",
      "severity": "medium",
      "category": "security"
    },
    {
      "id": "maintenance_window",
      "pattern": "maintenance",
      "regex": "(?i)maintenance|instance.*restart|unavailable.*maintenance|patching",
      "cause": "Instance unavailable during maintenance window",
      "solution": "Configure maintenance window for low-traffic periods, enable high availability for failover",
      "severity": "medium",
      "category": "maintenance"
    },
    {
      "id": "replica_error",
      "pattern": "Replica",
      "regex": "(?i)replica|replication.*lag|replica.*error|read.*replica",
      "cause": "Read replica sync or configuration issue",
      "solution": "Check replication lag metric, verify network between primary and replica, review replica size",
      "severity": "medium",
      "category": "replication"
    },
    {
      "id": "flag_error",
      "pattern": "Flag",
      "regex": "(?i)database.*flag|invalid.*flag|flag.*not.*supported|flag.*requires.*restart",
      "cause": "Database flag configuration error",
      "solution": "Verify flag is supported for database version, some flags require instance restart",
      "severity": "medium",
      "category": "configuration"
    },
    {
      "id": "quota_exceeded",
      "pattern": "Quota",
      "regex": "(?i)quota.*exceeded|instance.*limit|cpus.*limit|resource.*quota",
      "cause": "Cloud SQL quota exceeded",
      "solution": "Request quota increase in GCP Console, delete unused instances, use different region",
      "severity": "medium",
      "category": "limits"
    }
  ],
  "related_tools": ["gcloud", "mysql_client", "psql_cmd", "cloud_sql_proxy"],
  "documentation_url": "https://cloud.google.com/sql/docs"
}
