{
  "tool": "moment",
  "category": "i18n_localization",
  "common_errors": [
    {
      "pattern": "Deprecation warning: value provided is not in a recognized RFC2822 or ISO format",
      "meaning": "Parsing ambiguous date string",
      "causes": [
        "Date string format not ISO 8601",
        "Regional date format ambiguity (MM/DD vs DD/MM)",
        "Missing timezone information"
      ],
      "solutions": [
        "Specify format: moment('01/02/2024', 'MM/DD/YYYY')",
        "Use ISO format: moment('2024-01-02T00:00:00Z')",
        "Enable strict mode: moment('2024-01-02', 'YYYY-MM-DD', true)"
      ]
    },
    {
      "pattern": "Deprecation warning: moment construction falls back to js Date",
      "meaning": "Fallback to native Date parsing (unreliable)",
      "causes": [
        "No format specified for non-ISO string",
        "moment() called with unparseable string"
      ],
      "solutions": [
        "Always provide format string for non-ISO dates",
        "Use moment.ISO_8601 constant for ISO parsing",
        "Validate with moment().isValid()"
      ]
    },
    {
      "pattern": "Invalid date",
      "meaning": "Moment object represents invalid date",
      "causes": [
        "Parsing failed",
        "Date components out of range",
        "Invalid input to moment()"
      ],
      "solutions": [
        "Check isValid(): if (m.isValid()) { /* safe */ }",
        "Use invalidAt() to find which component failed",
        "Handle edge cases: moment('2024-02-30').isValid() // false"
      ]
    },
    {
      "pattern": "moment\\.locale\\('.*'\\) returns undefined",
      "meaning": "Locale not loaded",
      "causes": [
        "Locale file not imported",
        "Locale code misspelled",
        "Bundle doesn't include locale data"
      ],
      "solutions": [
        "Import locale: import 'moment/locale/de'",
        "For bundle size, use moment-locales-webpack-plugin",
        "Or use moment-timezone with specific locales"
      ]
    },
    {
      "pattern": "moment is not a function|moment is undefined",
      "meaning": "Module import/require issue",
      "causes": [
        "Incorrect import syntax",
        "ESM/CJS mismatch",
        "moment not installed"
      ],
      "solutions": [
        "CommonJS: const moment = require('moment')",
        "ESM: import moment from 'moment'",
        "Check package.json has moment as dependency"
      ]
    },
    {
      "pattern": "Cannot read property '.*' of undefined.*moment-timezone",
      "meaning": "Timezone data not loaded",
      "causes": [
        "moment-timezone used without timezone data",
        "Wrong import order"
      ],
      "solutions": [
        "Import with data: import 'moment-timezone'",
        "Or load specific zones: moment.tz.load(require('moment-timezone/data/packed/latest.json'))",
        "Import moment-timezone after moment"
      ]
    },
    {
      "pattern": "moment\\.duration.*object|\\[object Object\\]",
      "meaning": "Duration object converted to string incorrectly",
      "causes": [
        "Using duration object directly in template",
        "Not calling humanize() or format methods"
      ],
      "solutions": [
        "Use humanize(): moment.duration(2, 'hours').humanize()",
        "Or format: duration.asHours().toFixed(2)",
        "Use moment-duration-format plugin for full formatting"
      ]
    },
    {
      "pattern": "Moment mutates",
      "meaning": "Unexpected mutation of moment object",
      "causes": [
        "Methods like add(), subtract() mutate original",
        "Sharing moment object between components"
      ],
      "solutions": [
        "Clone before mutating: moment(original).add(1, 'day')",
        "Or use clone(): m.clone().add(1, 'day')",
        "Consider migrating to immutable library (date-fns, luxon)"
      ]
    }
  ]
}
