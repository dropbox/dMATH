{
  "tool": "swr",
  "category": "data_fetching",
  "common_errors": [
    {
      "id": "swr_fetcher",
      "pattern": "fetcher|useSWR fetcher|default fetcher",
      "severity": "error",
      "causes": [
        "No fetcher provided",
        "Fetcher signature wrong",
        "Global fetcher not set"
      ],
      "solutions": [
        "Provide fetcher: useSWR(key, fetcher)",
        "Or set global: <SWRConfig value={{ fetcher }}>",
        "Fetcher receives key as argument"
      ]
    },
    {
      "id": "swr_key_change",
      "pattern": "key changed|null key|conditional fetch",
      "severity": "warning",
      "causes": [
        "Key changing unexpectedly",
        "Want to skip fetch",
        "Dependent data"
      ],
      "solutions": [
        "Use null/undefined to pause: useSWR(user ? `/user/${user.id}` : null)",
        "Key must be stable reference",
        "Use array key: ['/api', id]"
      ]
    },
    {
      "id": "swr_revalidation",
      "pattern": "revalidation|stale data|too many requests",
      "severity": "warning",
      "causes": [
        "Default revalidation too aggressive",
        "Revalidating on focus/reconnect",
        "Want manual control"
      ],
      "solutions": [
        "revalidateOnFocus: false",
        "revalidateOnReconnect: false",
        "dedupingInterval: 2000 (ms)"
      ]
    },
    {
      "id": "swr_mutation",
      "pattern": "mutate|useSWRMutation|update cache",
      "severity": "info",
      "causes": [
        "Update cache after mutation",
        "Optimistic update",
        "Revalidate after POST"
      ],
      "solutions": [
        "Import { mutate } from 'swr'",
        "mutate(key) to revalidate",
        "mutate(key, newData, false) for optimistic"
      ]
    },
    {
      "id": "swr_infinite",
      "pattern": "useSWRInfinite|pagination|load more",
      "severity": "info",
      "causes": [
        "Paginated data",
        "Infinite scroll",
        "Page-based fetching"
      ],
      "solutions": [
        "useSWRInfinite((pageIndex, prevData) => key)",
        "Access data: data?.flat()",
        "setSize to load more pages"
      ]
    },
    {
      "id": "swr_error_handling",
      "pattern": "error handling|onError|retry",
      "severity": "warning",
      "causes": [
        "API returns error",
        "Want global error handler",
        "Custom retry logic"
      ],
      "solutions": [
        "Destructure error: const { data, error }",
        "Global: <SWRConfig onError={(err) => {}}>",
        "shouldRetryOnError: false"
      ]
    },
    {
      "id": "swr_suspense_mode",
      "pattern": "suspense|loading state|Suspense boundary",
      "severity": "info",
      "causes": [
        "Want React Suspense",
        "No loading handling",
        "Cleaner components"
      ],
      "solutions": [
        "useSWR(key, fetcher, { suspense: true })",
        "Wrap in <Suspense fallback={...}>",
        "Data always defined with suspense"
      ]
    },
    {
      "id": "swr_typescript",
      "pattern": "types|generic|type inference",
      "severity": "info",
      "causes": [
        "Data type unknown",
        "Error type",
        "Type inference"
      ],
      "solutions": [
        "useSWR<Data, Error>(key, fetcher)",
        "Inferred from fetcher return type",
        "Check fetcher return matches expected"
      ]
    }
  ]
}
