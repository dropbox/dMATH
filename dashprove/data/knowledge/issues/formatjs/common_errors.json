{
  "tool": "formatjs",
  "category": "i18n_localization",
  "common_errors": [
    {
      "pattern": "MISSING_TRANSLATION",
      "meaning": "No translation found for message ID",
      "causes": [
        "Message ID not in translation file",
        "Translation file not loaded for current locale",
        "ID mismatch between source and compiled messages"
      ],
      "solutions": [
        "Run formatjs extract to generate message IDs",
        "Run formatjs compile to generate locale files",
        "Ensure <IntlProvider messages={messages}> has correct messages prop",
        "Use onError handler to track missing translations"
      ]
    },
    {
      "pattern": "INVALID_MESSAGE_SYNTAX",
      "meaning": "ICU message format syntax error",
      "causes": [
        "Unbalanced braces in message",
        "Invalid select/plural syntax",
        "Missing closing tag in rich text formatting"
      ],
      "solutions": [
        "Check ICU message syntax: {count, plural, one {# item} other {# items}}",
        "Escape literal braces with single quotes: '{' becomes '{'",
        "Validate messages with formatjs lint"
      ]
    },
    {
      "pattern": "Could not find required `intl` object",
      "meaning": "IntlProvider not in component tree",
      "causes": [
        "Component using useIntl outside IntlProvider",
        "Multiple React trees without proper provider setup",
        "Server-side rendering missing provider"
      ],
      "solutions": [
        "Wrap app with <IntlProvider locale={locale} messages={messages}>",
        "For SSR, ensure provider wraps server-rendered components",
        "Use createIntl for non-React contexts"
      ]
    },
    {
      "pattern": "Format .* is not a function",
      "meaning": "Polyfill missing for Intl API",
      "causes": [
        "Browser doesn't support required Intl API",
        "Node.js missing ICU data",
        "Polyfill not loaded before formatjs"
      ],
      "solutions": [
        "Add @formatjs/intl-pluralrules polyfill",
        "Add @formatjs/intl-relativetimeformat polyfill",
        "For Node.js, use full-icu: node --icu-data-dir=node_modules/full-icu"
      ]
    },
    {
      "pattern": "Invalid tag .* in message",
      "meaning": "Rich text formatting tag not registered",
      "causes": [
        "Using <b> or custom tags without values prop",
        "Tag name mismatch between message and values"
      ],
      "solutions": [
        "Provide tag handlers in values: <FormattedMessage values={{ b: (chunks) => <strong>{chunks}</strong> }} />",
        "Use defaultRichTextElements for global tag handlers"
      ]
    },
    {
      "pattern": "Error parsing skeleton",
      "meaning": "Invalid number/date skeleton syntax",
      "causes": [
        "Incorrect skeleton pattern for number formatting",
        "Unsupported skeleton options"
      ],
      "solutions": [
        "Check skeleton syntax: {amount, number, ::currency/USD}",
        "Refer to ICU skeleton documentation",
        "Use style option instead for simple cases"
      ]
    },
    {
      "pattern": "Duplicate message id",
      "meaning": "Same ID used for different messages",
      "causes": [
        "Copy-paste error with defaultMessage but different IDs",
        "Collision from auto-generated IDs"
      ],
      "solutions": [
        "Use explicit unique IDs with idInterpolationPattern",
        "Run formatjs extract --throws to catch duplicates",
        "Configure @formatjs/cli with id-interpolation-pattern"
      ]
    },
    {
      "pattern": "Maximum call stack size exceeded",
      "meaning": "Infinite recursion in message parsing",
      "causes": [
        "Message references itself",
        "Deeply nested message structure"
      ],
      "solutions": [
        "Flatten message structure",
        "Split complex messages into simpler ones",
        "Check for circular references in AST"
      ]
    }
  ]
}
