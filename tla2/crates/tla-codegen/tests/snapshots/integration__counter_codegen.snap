---
source: crates/tla-codegen/tests/integration.rs
expression: code
---
//! Generated from TLA+ module: Counter
//!
//! This file was auto-generated by tla-codegen.
//! Do not edit manually.

#![allow(unused)]

use tla_runtime::prelude::*;

/// State for Counter
#[derive(Clone, Debug, PartialEq, Eq, Hash)]
pub struct CounterState {
    pub count: i64,
}

/// State machine for Counter
pub struct Counter;

impl StateMachine for Counter {
    type State = CounterState;

    fn init(&self) -> Vec<Self::State> {
        vec![Self::State {
            count: 0_i64,
        }]
    }

    fn next(&self, state: &Self::State) -> Vec<Self::State> {
        let mut next_states = Vec::new();

        // Action 1
        next_states.push(Self::State {
            count: (state.count + 1_i64),
        });

        next_states
    }

    fn check_invariant(&self, state: &Self::State) -> Option<bool> {
        Some(self.check_inv_non_negative(state))
    }
}

impl Counter {
    fn check_inv_non_negative(&self, state: &CounterState) -> bool {
        (state.count >= 0_i64)
    }
}
