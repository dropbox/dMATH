# Cargo configuration for TLA2 builds

[target.x86_64-unknown-linux-gnu]
# Use LLD for faster linking on Linux x86_64
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.aarch64-unknown-linux-gnu]
# Use LLD for faster linking on Linux aarch64
rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.aarch64-apple-darwin]
# Add Homebrew library path for Z3 linking on Apple Silicon
rustflags = ["-C", "link-arg=-L/opt/homebrew/lib"]

[target.x86_64-apple-darwin]
# Add Homebrew library path for Z3 linking on Intel Mac
rustflags = ["-C", "link-arg=-L/usr/local/lib"]

# Environment variables for Z3
# These can be overridden by setting them in the shell
# Platform-specific Z3 paths:
#   macOS (Homebrew Apple Silicon): /opt/homebrew/include/z3.h, /opt/homebrew/lib
#   macOS (Homebrew Intel): /usr/local/include/z3.h, /usr/local/lib
#   Linux: /usr/include/z3.h, /usr/lib
# If Z3 is installed via Homebrew on Apple Silicon, uncomment:
[env]
Z3_SYS_Z3_HEADER = "/opt/homebrew/include/z3.h"
LIBRARY_PATH = "/opt/homebrew/lib"
